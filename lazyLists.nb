Notebook[{
Cell[BoxData["Quit"], "Input",
 CellLabel->"In[98]:=",ExpressionUUID->"9144bd79-1271-4ef8-81e8-53730fe5da93"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"$HistoryLength", "=", "10"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"SetDirectory", "[", 
   RowBox[{"NotebookDirectory", "[", "]"}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Get", "[", "\"\<lazyLists`\>\"", "]"}], ";"}]}], "Input",
 CellLabel->"In[80]:=",ExpressionUUID->"2d6a87cf-3ef1-4832-b8b9-0995d6d1b646"],

Cell[CellGroupData[{

Cell["Usage messages", \
"Section",ExpressionUUID->"ec4cc4aa-b2ff-4f5e-9ddc-c3f207f96586"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"?", "lazyList"}], "\[IndentingNewLine]", 
 RowBox[{"?", "lazyRange"}], "\[IndentingNewLine]", 
 RowBox[{"?", "lazyPowerRange"}], "\[IndentingNewLine]", 
 RowBox[{"?", "lazyNestList"}], "\[IndentingNewLine]", 
 RowBox[{"?", "lazyStream"}]}], "Input",
 CellLabel->"In[83]:=",ExpressionUUID->"8f1d3194-9e73-46ae-83d7-5e7cad595285"],

Cell[CellGroupData[{

Cell[BoxData["\<\"lazyList is linked list that should contain 2 elements: the \
first is the first element, the second a held expression that will generate \
the next linked list when evaluated.\\nYou can extract these elements with \
First and Last. Part and Take will not work because they have been overloaded \
with special functionalities when used on lazyList\"\>"], "Print", \
"PrintUsage",
 CellTags->
  "Info833746264029-7461869",ExpressionUUID->"cb300f2e-29a7-45d9-9d72-\
f62e337a07c8"],

Cell[BoxData["\<\"lazyRange[] is a lazy representation of the Integers from 1 \
to \[Infinity]. lazyRange[min, delta] represents values values from min \
onwards in steps of delta\"\>"], "Print", "PrintUsage",
 CellTags->
  "Info843746264029-7461869",ExpressionUUID->"cb29ed0e-6071-4225-b631-\
8465ab320fe9"],

Cell[BoxData["\<\"lazyPowerRange[min, r] is the infinite list {min, r \
\[Times] min, r^2 \[Times] min, ...}\"\>"], "Print", "PrintUsage",
 CellTags->
  "Info853746264029-7461869",ExpressionUUID->"12ff2bd7-3525-473e-b91b-\
1a1de928d3e9"],

Cell[BoxData["\<\"lazyNestList[f, elem] is the infinite list {elem, f[elem], \
f[f[elem]], ...} starting with elem and generated by iterating f repeatedly\"\
\>"], "Print", "PrintUsage",
 CellTags->
  "Info863746264029-7461869",ExpressionUUID->"d64f3511-cc34-46ac-8bf4-\
1ec468db523d"],

Cell[BoxData["\<\"lazyStream[streamObject] creates a lazyList that streams \
from streamObject\"\>"], "Print", "PrintUsage",
 CellTags->
  "Info873746264029-7461869",ExpressionUUID->"bcbe39ab-d5d7-494e-9d62-\
a71d59a36671"]
}, Open  ]]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Using lazy lists", \
"Section",ExpressionUUID->"79b459a2-40b2-4d85-ad2a-91269059057f"],

Cell["\<\
Take and Part will continuously evaluate the next element of lazy list until \
the required elements have been found. \
\>", "Text",ExpressionUUID->"c60618e2-1470-4fc2-98cd-8097bfc68e7d"],

Cell[TextData[{
 StyleBox["Part",
  FontWeight->"Bold"],
 " of a lazyList returns a lazyList. You can get the element of interest with \
",
 StyleBox["First",
  FontWeight->"Bold"],
 ". You can keep extracting further elements from the returned lazyList so \
you don\[CloseCurlyQuote]t lose progress. The lazyList does not keep track of \
position for efficiency reasons. This is up to the user."
}], "Text",ExpressionUUID->"e1df6d75-65c5-48fc-8e85-a9ebc6a57896"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"Part", "[", 
  RowBox[{
   RowBox[{"lazyRange", "[", "]"}], ",", "4"}], "]"}], "\[IndentingNewLine]", 
 RowBox[{"First", "@", "%"}], "\[IndentingNewLine]", 
 RowBox[{"Part", "[", 
  RowBox[{"%%", ",", "2"}], "]"}]}], "Input",
 CellLabel->"In[94]:=",ExpressionUUID->"62f4563c-892f-4239-8057-70dc5511ffaf"],

Cell[BoxData[
 RowBox[{"lazyList", "[", 
  RowBox[{"4", ",", 
   RowBox[{
    RowBox[{"(", 
     RowBox[{
      RowBox[{"lazyList", "[", 
       RowBox[{"#1", ",", 
        RowBox[{"#0", "[", 
         RowBox[{
          RowBox[{"#2", "+", "#1"}], ",", "#2"}], "]"}]}], "]"}], "&"}], 
     ")"}], "[", 
    RowBox[{
     RowBox[{"1", "+", "4"}], ",", "1"}], "]"}]}], "]"}]], "Output",
 CellLabel->"Out[94]=",ExpressionUUID->"db3c5faf-6015-4729-8b62-bfe0009911f3"],

Cell[BoxData["4"], "Output",
 CellLabel->"Out[95]=",ExpressionUUID->"5f1911eb-46c1-4acb-827e-53f15e4008f4"],

Cell[BoxData[
 RowBox[{"lazyList", "[", 
  RowBox[{"5", ",", 
   RowBox[{
    RowBox[{"(", 
     RowBox[{
      RowBox[{"lazyList", "[", 
       RowBox[{"#1", ",", 
        RowBox[{"#0", "[", 
         RowBox[{
          RowBox[{"#2", "+", "#1"}], ",", "#2"}], "]"}]}], "]"}], "&"}], 
     ")"}], "[", 
    RowBox[{
     RowBox[{"1", "+", "5"}], ",", "1"}], "]"}]}], "]"}]], "Output",
 CellLabel->"Out[96]=",ExpressionUUID->"9f3dd981-4282-4251-b1ac-2aa21da9b42e"]
}, Open  ]],

Cell[TextData[{
 StyleBox["Take",
  FontWeight->"Bold"],
 " of lazyList returns a list. The first element is a list of the extracted \
elements. The last element is a lazyList at the point where take stopped. \
Note that there will be an overlap of 1 if you continue extracting elements \
form the returned lazyList (this is necessary to avoid unnecessary \
evaluations of elements)."
}], "Text",ExpressionUUID->"66aa0271-c1d7-444e-bd61-b1bc2b426edf"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"{", 
    RowBox[{"list", ",", "rest"}], "}"}], "=", 
   RowBox[{"Take", "[", 
    RowBox[{
     RowBox[{"lazyRange", "[", "]"}], ",", "4"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", "list", "\[IndentingNewLine]", "rest", "\
\[IndentingNewLine]", 
 RowBox[{"Take", "[", 
  RowBox[{"rest", ",", "5"}], "]"}]}], "Input",
 CellLabel->"In[34]:=",ExpressionUUID->"0deb31ae-48a0-4c10-b1c5-60e740712aa2"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"1", ",", "2", ",", "3", ",", "4"}], "}"}]], "Output",
 CellLabel->"Out[35]=",ExpressionUUID->"cbc65479-65da-465f-9791-6bba306c60b2"],

Cell[BoxData[
 RowBox[{"lazyList", "[", 
  RowBox[{"4", ",", 
   RowBox[{
    RowBox[{"(", 
     RowBox[{
      RowBox[{"lazyList", "[", 
       RowBox[{"#1", ",", 
        RowBox[{"#0", "[", 
         RowBox[{
          RowBox[{"#2", "+", "#1"}], ",", "#2"}], "]"}]}], "]"}], "&"}], 
     ")"}], "[", 
    RowBox[{
     RowBox[{"1", "+", "4"}], ",", "1"}], "]"}]}], "]"}]], "Output",
 CellLabel->"Out[36]=",ExpressionUUID->"a3289823-4032-4bfc-a29c-2abd02c180f6"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{"4", ",", "5", ",", "6", ",", "7", ",", "8"}], "}"}], ",", 
   RowBox[{"lazyList", "[", 
    RowBox[{"8", ",", 
     RowBox[{
      RowBox[{"(", 
       RowBox[{
        RowBox[{"lazyList", "[", 
         RowBox[{"#1", ",", 
          RowBox[{"#0", "[", 
           RowBox[{
            RowBox[{"#2", "+", "#1"}], ",", "#2"}], "]"}]}], "]"}], "&"}], 
       ")"}], "[", 
      RowBox[{
       RowBox[{"1", "+", "8"}], ",", "1"}], "]"}]}], "]"}]}], "}"}]], "Output",
 CellLabel->"Out[37]=",ExpressionUUID->"6bad0c59-0edd-49de-8393-0ecf962d2f3f"]
}, Open  ]],

Cell["\<\
TakeWhile also works with lazyLists. Note that the returned lazyList contains \
the first element that didn\[CloseCurlyQuote]t pass the test:\
\>", "Text",ExpressionUUID->"d9a560d3-261a-4f9c-bb6c-955eabdcb76c"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"TakeWhile", "[", 
  RowBox[{
   RowBox[{"lazyPowerRange", "[", 
    RowBox[{"2", ",", "2"}], "]"}], ",", 
   RowBox[{
    RowBox[{"#", "<", "100"}], "&"}]}], "]"}]], "Input",
 CellLabel->"In[38]:=",ExpressionUUID->"81c528c1-fbff-4d04-adb4-9a8335001936"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{"2", ",", "4", ",", "8", ",", "16", ",", "32", ",", "64"}], "}"}],
    ",", 
   RowBox[{"lazyList", "[", 
    RowBox[{"128", ",", 
     RowBox[{
      RowBox[{"(", 
       RowBox[{
        RowBox[{"lazyList", "[", 
         RowBox[{"#1", ",", 
          RowBox[{"#0", "[", 
           RowBox[{
            RowBox[{"#2", " ", "#1"}], ",", "#2"}], "]"}]}], "]"}], "&"}], 
       ")"}], "[", 
      RowBox[{
       RowBox[{"2", " ", "128"}], ",", "2"}], "]"}]}], "]"}]}], 
  "}"}]], "Output",
 CellLabel->"Out[38]=",ExpressionUUID->"27126928-d007-4535-9995-88a96c4d80a5"]
}, Open  ]],

Cell[TextData[{
 StyleBox["Map",
  FontWeight->"Bold"],
 ", ",
 StyleBox["FoldList",
  FontWeight->"Bold"],
 ", ",
 StyleBox["Cases",
  FontWeight->"Bold"],
 ",",
 StyleBox[" Pick",
  FontWeight->"Bold"],
 ",",
 StyleBox[" ",
  FontWeight->"Bold"],
 "and ",
 StyleBox["Select",
  FontWeight->"Bold"],
 " work with lazyLists and return lazyLists:"
}], "Text",ExpressionUUID->"2db4b7f0-d54f-42c4-8598-19597a08299a"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"Map", "[", 
  RowBox[{"Sqrt", ",", 
   RowBox[{"lazyRange", "[", 
    RowBox[{"0", ",", "2"}], "]"}]}], "]"}], "\[IndentingNewLine]", 
 RowBox[{"First", "@", 
  RowBox[{"Take", "[", 
   RowBox[{"%", ",", "5"}], "]"}]}]}], "Input",
 CellLabel->"In[83]:=",ExpressionUUID->"db26052a-0c7d-4de0-99a3-0b0a708b07d2"],

Cell[BoxData[
 RowBox[{"lazyList", "[", 
  RowBox[{"0", ",", 
   RowBox[{"Sqrt", "/@", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{
       RowBox[{"lazyList", "[", 
        RowBox[{"#1", ",", 
         RowBox[{"#0", "[", 
          RowBox[{
           RowBox[{"#2", "+", "#1"}], ",", "#2"}], "]"}]}], "]"}], "&"}], 
      ")"}], "[", 
     RowBox[{
      RowBox[{"2", "+", "0"}], ",", "2"}], "]"}]}]}], "]"}]], "Output",
 CellLabel->"Out[83]=",ExpressionUUID->"459e89a4-4031-43c5-a16b-4c49eec0f070"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"0", ",", 
   SqrtBox["2"], ",", "2", ",", 
   SqrtBox["6"], ",", 
   RowBox[{"2", " ", 
    SqrtBox["2"]}]}], "}"}]], "Output",
 CellLabel->"Out[84]=",ExpressionUUID->"14bea3d9-5d81-4981-a187-298b52836534"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"FoldList", "[", 
  RowBox[{"Plus", ",", "x0", ",", 
   RowBox[{"lazyRange", "[", 
    RowBox[{"n", ",", "m"}], "]"}]}], "]"}], "\[IndentingNewLine]", 
 RowBox[{"First", "@", 
  RowBox[{"Take", "[", 
   RowBox[{"%", ",", "5"}], "]"}]}]}], "Input",
 CellLabel->"In[85]:=",ExpressionUUID->"88d3c946-e148-4f02-8892-b1be9959da90"],

Cell[BoxData[
 RowBox[{"lazyList", "[", 
  RowBox[{"x0", ",", 
   RowBox[{"FoldList", "[", 
    RowBox[{"Plus", ",", 
     RowBox[{"lazyList", "[", 
      RowBox[{
       RowBox[{"x0", "+", 
        RowBox[{"First", "[", 
         RowBox[{"lazyList", "[", 
          RowBox[{"n", ",", 
           RowBox[{
            RowBox[{"(", 
             RowBox[{
              RowBox[{"lazyList", "[", 
               RowBox[{"#1", ",", 
                RowBox[{"#0", "[", 
                 RowBox[{
                  RowBox[{"#2", "+", "#1"}], ",", "#2"}], "]"}]}], "]"}], 
              "&"}], ")"}], "[", 
            RowBox[{
             RowBox[{"m", "+", "n"}], ",", "m"}], "]"}]}], "]"}], "]"}]}], 
       ",", 
       RowBox[{"Last", "[", 
        RowBox[{"lazyList", "[", 
         RowBox[{"n", ",", 
          RowBox[{
           RowBox[{"(", 
            RowBox[{
             RowBox[{"lazyList", "[", 
              RowBox[{"#1", ",", 
               RowBox[{"#0", "[", 
                RowBox[{
                 RowBox[{"#2", "+", "#1"}], ",", "#2"}], "]"}]}], "]"}], 
             "&"}], ")"}], "[", 
           RowBox[{
            RowBox[{"m", "+", "n"}], ",", "m"}], "]"}]}], "]"}], "]"}]}], 
      "]"}]}], "]"}]}], "]"}]], "Output",
 CellLabel->"Out[85]=",ExpressionUUID->"bda20dcc-e296-44fb-b36e-d2478ae2db28"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"x0", ",", 
   RowBox[{"n", "+", "x0"}], ",", 
   RowBox[{"m", "+", 
    RowBox[{"2", " ", "n"}], "+", "x0"}], ",", 
   RowBox[{
    RowBox[{"3", " ", "m"}], "+", 
    RowBox[{"3", " ", "n"}], "+", "x0"}], ",", 
   RowBox[{
    RowBox[{"6", " ", "m"}], "+", 
    RowBox[{"4", " ", "n"}], "+", "x0"}]}], "}"}]], "Output",
 CellLabel->"Out[86]=",ExpressionUUID->"9cd3ab68-2039-40ab-ae2f-d65ac0e568b3"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"Cases", "[", 
  RowBox[{
   RowBox[{"lazyRange", "[", 
    RowBox[{"0", ",", 
     RowBox[{"2", "/", "3"}]}], "]"}], ",", "_Integer"}], 
  "]"}], "\[IndentingNewLine]", 
 RowBox[{"First", "@", 
  RowBox[{"Take", "[", 
   RowBox[{"%", ",", "5"}], "]"}]}]}], "Input",
 CellLabel->"In[75]:=",ExpressionUUID->"b0b0dea7-1808-4672-a86a-d9ce4333d960"],

Cell[BoxData[
 RowBox[{"lazyList", "[", 
  RowBox[{"0", ",", 
   RowBox[{"lazyLists`Private`case$2852", "[", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{
       RowBox[{"lazyList", "[", 
        RowBox[{"#1", ",", 
         RowBox[{"#0", "[", 
          RowBox[{
           RowBox[{"#2", "+", "#1"}], ",", "#2"}], "]"}]}], "]"}], "&"}], 
      ")"}], "[", 
     RowBox[{
      RowBox[{
       FractionBox["2", "3"], "+", "0"}], ",", 
      FractionBox["2", "3"]}], "]"}], "]"}]}], "]"}]], "Output",
 CellLabel->"Out[75]=",ExpressionUUID->"6a94ce30-3a5b-4daf-ac2b-7100649a1a5c"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"0", ",", "2", ",", "4", ",", "6", ",", "8"}], "}"}]], "Output",
 CellLabel->"Out[76]=",ExpressionUUID->"05e44088-331a-44d4-865f-a3b4dc51edbf"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"Pick", "[", 
  RowBox[{
   RowBox[{"lazyRange", "[", 
    RowBox[{"0", ",", "2"}], "]"}], ",", 
   RowBox[{"lazyRange", "[", 
    RowBox[{"0", ",", 
     RowBox[{"2", "/", "3"}]}], "]"}], ",", "_Integer"}], 
  "]"}], "\[IndentingNewLine]", 
 RowBox[{"First", "@", 
  RowBox[{"Take", "[", 
   RowBox[{"%", ",", "5"}], "]"}]}]}], "Input",
 CellLabel->"In[90]:=",ExpressionUUID->"02767e8a-5bbd-4578-a783-6b1ca449f3b0"],

Cell[BoxData[
 RowBox[{"lazyList", "[", 
  RowBox[{"0", ",", 
   RowBox[{"lazyLists`Private`pick$2894", "[", 
    RowBox[{
     RowBox[{
      RowBox[{"(", 
       RowBox[{
        RowBox[{"lazyList", "[", 
         RowBox[{"#1", ",", 
          RowBox[{"#0", "[", 
           RowBox[{
            RowBox[{"#2", "+", "#1"}], ",", "#2"}], "]"}]}], "]"}], "&"}], 
       ")"}], "[", 
      RowBox[{
       RowBox[{"2", "+", "0"}], ",", "2"}], "]"}], ",", 
     RowBox[{
      RowBox[{"(", 
       RowBox[{
        RowBox[{"lazyList", "[", 
         RowBox[{"#1", ",", 
          RowBox[{"#0", "[", 
           RowBox[{
            RowBox[{"#2", "+", "#1"}], ",", "#2"}], "]"}]}], "]"}], "&"}], 
       ")"}], "[", 
      RowBox[{
       RowBox[{
        FractionBox["2", "3"], "+", "0"}], ",", 
       FractionBox["2", "3"]}], "]"}]}], "]"}]}], "]"}]], "Output",
 CellLabel->"Out[90]=",ExpressionUUID->"5ee3ca63-850f-4bf9-8c1a-f319349ef41b"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"0", ",", "6", ",", "12", ",", "18", ",", "24"}], "}"}]], "Output",
 CellLabel->"Out[91]=",ExpressionUUID->"cea1a6d9-1022-452e-8f6c-40a7fbd1f953"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"Select", "[", 
  RowBox[{
   RowBox[{"lazyRange", "[", "]"}], ",", "OddQ"}], 
  "]"}], "\[IndentingNewLine]", 
 RowBox[{"First", "@", 
  RowBox[{"Take", "[", 
   RowBox[{"%", ",", "5"}], "]"}]}]}], "Input",
 CellLabel->"In[92]:=",ExpressionUUID->"f7cc65d1-b623-4858-860e-fb8bda6906cf"],

Cell[BoxData[
 RowBox[{"lazyList", "[", 
  RowBox[{"1", ",", 
   RowBox[{"Select", "[", 
    RowBox[{
     RowBox[{
      RowBox[{"(", 
       RowBox[{
        RowBox[{"lazyList", "[", 
         RowBox[{"#1", ",", 
          RowBox[{"#0", "[", 
           RowBox[{
            RowBox[{"#2", "+", "#1"}], ",", "#2"}], "]"}]}], "]"}], "&"}], 
       ")"}], "[", 
      RowBox[{
       RowBox[{"1", "+", "1"}], ",", "1"}], "]"}], ",", "OddQ"}], "]"}]}], 
  "]"}]], "Output",
 CellLabel->"Out[92]=",ExpressionUUID->"16147dac-4db3-460f-ae77-2921e70d8c44"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"1", ",", "3", ",", "5", ",", "7", ",", "9"}], "}"}]], "Output",
 CellLabel->"Out[93]=",ExpressionUUID->"c508ad7d-568e-4b87-9ccc-2bfb8c6197f5"]
}, Open  ]],

Cell["lazyLists can be used with InputStreams. First make a file:", \
"Text",ExpressionUUID->"f082c183-c495-4435-9420-7573f759251c"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"stmp", "=", 
   RowBox[{"OpenWrite", "[", "\"\<tmp\>\"", "]"}]}], ";"}], "\n", 
 RowBox[{"Write", "[", 
  RowBox[{"stmp", ",", "a", ",", "b", ",", "c"}], "]"}], "\n", 
 RowBox[{"Write", "[", 
  RowBox[{"stmp", ",", "x"}], "]"}], "\n", 
 RowBox[{"Write", "[", 
  RowBox[{"stmp", ",", "\"\<Hello\>\""}], "]"}], "\[IndentingNewLine]", 
 RowBox[{"Close", "[", "stmp", "]"}]}], "Input",
 CellLabel->"In[60]:=",
 CellID->28621,ExpressionUUID->"56e7c7ce-37ef-4877-9931-7dd9f3a12e91"],

Cell[BoxData["\<\"tmp\"\>"], "Output",
 CellLabel->"Out[64]=",ExpressionUUID->"25d49f24-34ad-4ae3-9043-d5482be112e2"]
}, Open  ]],

Cell["Open a reading stream and make a lazyList out of it:", \
"Text",ExpressionUUID->"a3290700-5172-4544-bd8e-a4ce7202ecbb"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"stream", "=", 
   RowBox[{"OpenRead", "[", "\"\<tmp\>\"", "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{"streamList", " ", "=", " ", 
  RowBox[{"lazyStream", "[", "stream", "]"}]}], "\[IndentingNewLine]", 
 RowBox[{"First", "@", 
  RowBox[{"TakeWhile", "[", 
   RowBox[{"streamList", ",", 
    RowBox[{
     RowBox[{"#", "=!=", "EndOfFile"}], "&"}]}], 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{"Close", "[", "stream", "]"}]}], "Input",
 CellLabel->"In[76]:=",ExpressionUUID->"397a2c85-f736-4613-8c9b-d8a642960c89"],

Cell[BoxData[
 RowBox[{"lazyList", "[", 
  RowBox[{"abc", ",", 
   RowBox[{
    RowBox[{"(", 
     RowBox[{
      RowBox[{"lazyList", "[", 
       RowBox[{
        RowBox[{"Read", "[", "#1", "]"}], ",", 
        RowBox[{"#0", "[", "#1", "]"}]}], "]"}], "&"}], ")"}], "[", 
    InterpretationBox[
     RowBox[{
      TagBox["InputStream",
       "SummaryHead"], "[", 
      DynamicModuleBox[{Typeset`open$$ = False, Typeset`embedState$$ = 
       "Ready"}, 
       TemplateBox[{PaneSelectorBox[{False -> GridBox[{{
               PaneBox[
                ButtonBox[
                 DynamicBox[
                  FEPrivate`FrontEndResource[
                  "FEBitmaps", "SquarePlusIconMedium"]], 
                 ButtonFunction :> (Typeset`open$$ = True), Appearance -> 
                 None, Evaluator -> Automatic, Method -> "Preemptive"], 
                Alignment -> {Center, Center}, ImageSize -> 
                Dynamic[{
                  Automatic, 3.5 CurrentValue["FontCapHeight"]/
                   AbsoluteCurrentValue[Magnification]}]], 
               GraphicsBox[{
                 Thickness[0.0016806722689075631`], 
                 StyleBox[{
                   
                   FilledCurveBox[{{{1, 4, 3}, {0, 1, 0}, {1, 3, 3}, {0, 1, 
                    0}, {1, 3, 3}, {0, 1, 0}, {1, 3, 3}, {0, 1, 0}}}, {{{
                    25.499999999999996`, 2.5}, {25.499999999999996`, 
                    1.3953100000000003`}, {24.604699999999998`, 
                    0.49999999999999994`}, {23.5, 0.49999999999999994`}, {2.5,
                     0.49999999999999994`}, {1.3953100000000003`, 
                    0.49999999999999994`}, {0.49999999999999994`, 
                    1.3953100000000003`}, {0.49999999999999994`, 2.5}, {
                    0.49999999999999994`, 23.5}, {0.49999999999999994`, 
                    24.604699999999998`}, {1.3953100000000003`, 
                    25.499999999999996`}, {2.5, 25.499999999999996`}, {23.5, 
                    25.499999999999996`}, {24.604699999999998`, 
                    25.499999999999996`}, {25.499999999999996`, 
                    24.604699999999998`}, {25.499999999999996`, 23.5}, {
                    25.499999999999996`, 2.5}}}]}, 
                  FaceForm[{
                    GrayLevel[0.93], 
                    Opacity[1.]}], StripOnInput -> False], 
                 StyleBox[{
                   
                   JoinedCurveBox[{{{1, 4, 3}, {0, 1, 0}, {1, 3, 3}, {0, 1, 
                    0}, {1, 3, 3}, {0, 1, 0}, {1, 3, 3}, {0, 1, 0}}}, {{{
                    25.499999999999996`, 2.5}, {25.499999999999996`, 
                    1.3953100000000003`}, {24.604699999999998`, 
                    0.49999999999999994`}, {23.5, 0.49999999999999994`}, {2.5,
                     0.49999999999999994`}, {1.3953100000000003`, 
                    0.49999999999999994`}, {0.49999999999999994`, 
                    1.3953100000000003`}, {0.49999999999999994`, 2.5}, {
                    0.49999999999999994`, 23.5}, {0.49999999999999994`, 
                    24.604699999999998`}, {1.3953100000000003`, 
                    25.499999999999996`}, {2.5, 25.499999999999996`}, {23.5, 
                    25.499999999999996`}, {24.604699999999998`, 
                    25.499999999999996`}, {25.499999999999996`, 
                    24.604699999999998`}, {25.499999999999996`, 23.5}, {
                    25.499999999999996`, 2.5}}}, CurveClosed -> {1}]}, 
                  JoinForm[{"Miter", 10.}], 
                  RGBColor[0.699951, 0.699951, 0.699951, 1.], StripOnInput -> 
                  False], 
                 StyleBox[{
                   
                   FilledCurveBox[{{{0, 2, 0}, {1, 3, 3}, {0, 1, 0}, {1, 3, 
                    3}, {0, 1, 0}, {1, 3, 3}, {1, 3, 3}}}, {{{
                    22.478099999999998`, 1.0035199999999997`}, {
                    23.478899999999996`, 1.0035199999999997`}, {
                    24.321099999999998`, 1.0035199999999997`}, {
                    25.003899999999998`, 1.6863299999999997`}, {
                    25.003899999999998`, 2.5285199999999994`}, {
                    25.003899999999998`, 23.474999999999998`}, {
                    25.003899999999998`, 24.317199999999996`}, {
                    24.321099999999998`, 24.999999999999996`}, {
                    23.478899999999996`, 24.999999999999996`}, {
                    22.478099999999998`, 24.999999999999996`}, {
                    22.478099999999998`, 24.999999999999993`}, {20.4805, 
                    22.421099999999996`}, {20.4805, 13.0039}, {20.4805, 
                    3.5867199999999992`}, {22.478099999999998`, 
                    1.0035199999999997`}, {22.478099999999998`, 
                    1.0035199999999997`}}}], 
                   
                   FilledCurveBox[{{{0, 2, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 
                    0}, {0, 1, 0}, {0, 1, 0}}}, {{{3.50586, 12.9016}, {
                    8.26328, 16.8398}, {8.26328, 14.856599999999998`}, {
                    6.0230500000000005`, 12.947299999999997`}, {8.26328, 
                    10.946100000000001`}, {8.26328, 8.96289}, {3.50586, 
                    12.9016}}}]}, 
                  FaceForm[
                   RGBColor[0.5, 0.5, 0.5, 1.]], StripOnInput -> False], 
                 StyleBox[{
                   
                   FilledCurveBox[{{{1, 4, 3}, {1, 3, 3}, {1, 3, 3}, {1, 3, 
                    3}}}, {{{16.801199999999998`, 12.8969}, {
                    16.801199999999998`, 12.335499999999998`}, {
                    17.256200000000003`, 11.880899999999999`}, {
                    17.817599999999995`, 11.880899999999999`}, {
                    18.378899999999998`, 11.880899999999999`}, {18.834, 
                    12.335499999999998`}, {18.834, 12.8969}, {18.834, 
                    13.458200000000003`}, {18.378899999999998`, 13.9133}, {
                    17.817599999999995`, 13.9133}, {17.256200000000003`, 
                    13.9133}, {16.801199999999998`, 13.458200000000003`}, {
                    16.801199999999998`, 12.8969}}}], 
                   
                   FilledCurveBox[{{{1, 4, 3}, {1, 3, 3}, {1, 3, 3}, {1, 3, 
                    3}}}, {{{13.3812, 12.8969}, {13.3812, 
                    12.335499999999998`}, {13.836300000000001`, 
                    11.880899999999999`}, {14.397699999999999`, 
                    11.880899999999999`}, {14.958999999999998`, 
                    11.880899999999999`}, {15.413699999999999`, 
                    12.335499999999998`}, {15.413699999999999`, 12.8969}, {
                    15.413699999999999`, 13.458200000000003`}, {
                    14.958999999999998`, 13.9133}, {14.397699999999999`, 
                    13.9133}, {13.836300000000001`, 13.9133}, {13.3812, 
                    13.458200000000003`}, {13.3812, 12.8969}}}], 
                   
                   FilledCurveBox[{{{1, 4, 3}, {1, 3, 3}, {1, 3, 3}, {1, 3, 
                    3}}}, {{{9.961329999999998, 12.8969}, {9.961329999999998, 
                    12.335499999999998`}, {10.4164, 11.880899999999999`}, {
                    10.977699999999999`, 11.880899999999999`}, {
                    11.538699999999999`, 11.880899999999999`}, {11.9938, 
                    12.335499999999998`}, {11.9938, 12.8969}, {11.9938, 
                    13.458200000000003`}, {11.538699999999999`, 13.9133}, {
                    10.977699999999999`, 13.9133}, {10.4164, 13.9133}, {
                    9.961329999999998, 13.458200000000003`}, {
                    9.961329999999998, 12.8969}}}]}, 
                  FaceForm[
                   RGBColor[
                   0.46093800000000007`, 0.46093800000000007`, 
                    0.46093800000000007`, 1.]], StripOnInput -> False]}, 
                Background -> GrayLevel[0.5], Axes -> False, AspectRatio -> 1,
                 ImageSize -> {Automatic, 
                  Dynamic[
                  3.5 (CurrentValue["FontCapHeight"]/AbsoluteCurrentValue[
                    Magnification])]}, Frame -> True, FrameTicks -> None, 
                FrameStyle -> Directive[
                  Thickness[Tiny], 
                  GrayLevel[0.7]]], 
               GridBox[{{
                  RowBox[{
                    TagBox["\"Name: \"", "SummaryItemAnnotation"], 
                    "\[InvisibleSpace]", 
                    TagBox[
                    StyleBox[
                    PaneBox[
                    "\"tmp\"", ContentPadding -> False, FrameMargins -> 0, 
                    StripOnInput -> True, BaselinePosition -> Baseline, 
                    ImageSize -> {{1, 300}, Automatic}], LineBreakWithin -> 
                    False], "SummaryItem"]}]}, {
                  RowBox[{
                    TagBox["\"Unique ID: \"", "SummaryItemAnnotation"], 
                    "\[InvisibleSpace]", 
                    TagBox["3", "SummaryItem"]}]}}, 
                GridBoxAlignment -> {
                 "Columns" -> {{Left}}, "Rows" -> {{Automatic}}}, AutoDelete -> 
                False, 
                GridBoxItemSize -> {
                 "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}, 
                GridBoxSpacings -> {
                 "Columns" -> {{2}}, "Rows" -> {{Automatic}}}, 
                BaseStyle -> {
                 ShowStringCharacters -> False, NumberMarks -> False, 
                  PrintPrecision -> 3, ShowSyntaxStyles -> False}]}}, 
             GridBoxAlignment -> {"Rows" -> {{Top}}}, AutoDelete -> False, 
             GridBoxItemSize -> {
              "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}, 
             BaselinePosition -> {1, 1}], True -> GridBox[{{
               PaneBox[
                ButtonBox[
                 DynamicBox[
                  FEPrivate`FrontEndResource[
                  "FEBitmaps", "SquareMinusIconMedium"]], 
                 ButtonFunction :> (Typeset`open$$ = False), Appearance -> 
                 None, Evaluator -> Automatic, Method -> "Preemptive"], 
                Alignment -> {Center, Center}, ImageSize -> 
                Dynamic[{
                  Automatic, 3.5 CurrentValue["FontCapHeight"]/
                   AbsoluteCurrentValue[Magnification]}]], 
               GraphicsBox[{
                 Thickness[0.0016806722689075631`], 
                 StyleBox[{
                   
                   FilledCurveBox[{{{1, 4, 3}, {0, 1, 0}, {1, 3, 3}, {0, 1, 
                    0}, {1, 3, 3}, {0, 1, 0}, {1, 3, 3}, {0, 1, 0}}}, {{{
                    25.499999999999996`, 2.5}, {25.499999999999996`, 
                    1.3953100000000003`}, {24.604699999999998`, 
                    0.49999999999999994`}, {23.5, 0.49999999999999994`}, {2.5,
                     0.49999999999999994`}, {1.3953100000000003`, 
                    0.49999999999999994`}, {0.49999999999999994`, 
                    1.3953100000000003`}, {0.49999999999999994`, 2.5}, {
                    0.49999999999999994`, 23.5}, {0.49999999999999994`, 
                    24.604699999999998`}, {1.3953100000000003`, 
                    25.499999999999996`}, {2.5, 25.499999999999996`}, {23.5, 
                    25.499999999999996`}, {24.604699999999998`, 
                    25.499999999999996`}, {25.499999999999996`, 
                    24.604699999999998`}, {25.499999999999996`, 23.5}, {
                    25.499999999999996`, 2.5}}}]}, 
                  FaceForm[{
                    GrayLevel[0.93], 
                    Opacity[1.]}], StripOnInput -> False], 
                 StyleBox[{
                   
                   JoinedCurveBox[{{{1, 4, 3}, {0, 1, 0}, {1, 3, 3}, {0, 1, 
                    0}, {1, 3, 3}, {0, 1, 0}, {1, 3, 3}, {0, 1, 0}}}, {{{
                    25.499999999999996`, 2.5}, {25.499999999999996`, 
                    1.3953100000000003`}, {24.604699999999998`, 
                    0.49999999999999994`}, {23.5, 0.49999999999999994`}, {2.5,
                     0.49999999999999994`}, {1.3953100000000003`, 
                    0.49999999999999994`}, {0.49999999999999994`, 
                    1.3953100000000003`}, {0.49999999999999994`, 2.5}, {
                    0.49999999999999994`, 23.5}, {0.49999999999999994`, 
                    24.604699999999998`}, {1.3953100000000003`, 
                    25.499999999999996`}, {2.5, 25.499999999999996`}, {23.5, 
                    25.499999999999996`}, {24.604699999999998`, 
                    25.499999999999996`}, {25.499999999999996`, 
                    24.604699999999998`}, {25.499999999999996`, 23.5}, {
                    25.499999999999996`, 2.5}}}, CurveClosed -> {1}]}, 
                  JoinForm[{"Miter", 10.}], 
                  RGBColor[0.699951, 0.699951, 0.699951, 1.], StripOnInput -> 
                  False], 
                 StyleBox[{
                   
                   FilledCurveBox[{{{0, 2, 0}, {1, 3, 3}, {0, 1, 0}, {1, 3, 
                    3}, {0, 1, 0}, {1, 3, 3}, {1, 3, 3}}}, {{{
                    22.478099999999998`, 1.0035199999999997`}, {
                    23.478899999999996`, 1.0035199999999997`}, {
                    24.321099999999998`, 1.0035199999999997`}, {
                    25.003899999999998`, 1.6863299999999997`}, {
                    25.003899999999998`, 2.5285199999999994`}, {
                    25.003899999999998`, 23.474999999999998`}, {
                    25.003899999999998`, 24.317199999999996`}, {
                    24.321099999999998`, 24.999999999999996`}, {
                    23.478899999999996`, 24.999999999999996`}, {
                    22.478099999999998`, 24.999999999999996`}, {
                    22.478099999999998`, 24.999999999999993`}, {20.4805, 
                    22.421099999999996`}, {20.4805, 13.0039}, {20.4805, 
                    3.5867199999999992`}, {22.478099999999998`, 
                    1.0035199999999997`}, {22.478099999999998`, 
                    1.0035199999999997`}}}], 
                   
                   FilledCurveBox[{{{0, 2, 0}, {0, 1, 0}, {0, 1, 0}, {0, 1, 
                    0}, {0, 1, 0}, {0, 1, 0}}}, {{{3.50586, 12.9016}, {
                    8.26328, 16.8398}, {8.26328, 14.856599999999998`}, {
                    6.0230500000000005`, 12.947299999999997`}, {8.26328, 
                    10.946100000000001`}, {8.26328, 8.96289}, {3.50586, 
                    12.9016}}}]}, 
                  FaceForm[
                   RGBColor[0.5, 0.5, 0.5, 1.]], StripOnInput -> False], 
                 StyleBox[{
                   
                   FilledCurveBox[{{{1, 4, 3}, {1, 3, 3}, {1, 3, 3}, {1, 3, 
                    3}}}, {{{16.801199999999998`, 12.8969}, {
                    16.801199999999998`, 12.335499999999998`}, {
                    17.256200000000003`, 11.880899999999999`}, {
                    17.817599999999995`, 11.880899999999999`}, {
                    18.378899999999998`, 11.880899999999999`}, {18.834, 
                    12.335499999999998`}, {18.834, 12.8969}, {18.834, 
                    13.458200000000003`}, {18.378899999999998`, 13.9133}, {
                    17.817599999999995`, 13.9133}, {17.256200000000003`, 
                    13.9133}, {16.801199999999998`, 13.458200000000003`}, {
                    16.801199999999998`, 12.8969}}}], 
                   
                   FilledCurveBox[{{{1, 4, 3}, {1, 3, 3}, {1, 3, 3}, {1, 3, 
                    3}}}, {{{13.3812, 12.8969}, {13.3812, 
                    12.335499999999998`}, {13.836300000000001`, 
                    11.880899999999999`}, {14.397699999999999`, 
                    11.880899999999999`}, {14.958999999999998`, 
                    11.880899999999999`}, {15.413699999999999`, 
                    12.335499999999998`}, {15.413699999999999`, 12.8969}, {
                    15.413699999999999`, 13.458200000000003`}, {
                    14.958999999999998`, 13.9133}, {14.397699999999999`, 
                    13.9133}, {13.836300000000001`, 13.9133}, {13.3812, 
                    13.458200000000003`}, {13.3812, 12.8969}}}], 
                   
                   FilledCurveBox[{{{1, 4, 3}, {1, 3, 3}, {1, 3, 3}, {1, 3, 
                    3}}}, {{{9.961329999999998, 12.8969}, {9.961329999999998, 
                    12.335499999999998`}, {10.4164, 11.880899999999999`}, {
                    10.977699999999999`, 11.880899999999999`}, {
                    11.538699999999999`, 11.880899999999999`}, {11.9938, 
                    12.335499999999998`}, {11.9938, 12.8969}, {11.9938, 
                    13.458200000000003`}, {11.538699999999999`, 13.9133}, {
                    10.977699999999999`, 13.9133}, {10.4164, 13.9133}, {
                    9.961329999999998, 13.458200000000003`}, {
                    9.961329999999998, 12.8969}}}]}, 
                  FaceForm[
                   RGBColor[
                   0.46093800000000007`, 0.46093800000000007`, 
                    0.46093800000000007`, 1.]], StripOnInput -> False]}, 
                Background -> GrayLevel[0.5], Axes -> False, AspectRatio -> 1,
                 ImageSize -> {Automatic, 
                  Dynamic[
                  3.5 (CurrentValue["FontCapHeight"]/AbsoluteCurrentValue[
                    Magnification])]}, Frame -> True, FrameTicks -> None, 
                FrameStyle -> Directive[
                  Thickness[Tiny], 
                  GrayLevel[0.7]]], 
               GridBox[{{
                  RowBox[{
                    TagBox["\"Name: \"", "SummaryItemAnnotation"], 
                    "\[InvisibleSpace]", 
                    TagBox[
                    PaneBox[
                    "\"tmp\"", ImageSize -> {{1, 500}, Automatic}, 
                    BaselinePosition -> Baseline, ContentPadding -> False, 
                    FrameMargins -> 0, StripOnInput -> True], 
                    "SummaryItem"]}]}, {
                  RowBox[{
                    TagBox["\"Unique ID: \"", "SummaryItemAnnotation"], 
                    "\[InvisibleSpace]", 
                    TagBox["3", "SummaryItem"]}]}, {
                  RowBox[{
                    TagBox["\"Binary: \"", "SummaryItemAnnotation"], 
                    "\[InvisibleSpace]", 
                    TagBox["False", "SummaryItem"]}]}, {
                  RowBox[{
                    TagBox["\"Open: \"", "SummaryItemAnnotation"], 
                    "\[InvisibleSpace]", 
                    TagBox[
                    DynamicBox[
                    ToBoxes[Options[
                    InputStream["tmp", 3]] =!= {}, StandardForm], 
                    UpdateInterval -> 1], "SummaryItem"]}]}}, 
                GridBoxAlignment -> {
                 "Columns" -> {{Left}}, "Rows" -> {{Automatic}}}, AutoDelete -> 
                False, GridBoxItemSize -> {
                 "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}, 
                GridBoxSpacings -> {
                 "Columns" -> {{2}}, "Rows" -> {{Automatic}}}, 
                BaseStyle -> {
                 ShowStringCharacters -> False, NumberMarks -> False, 
                  PrintPrecision -> 3, ShowSyntaxStyles -> False}]}}, 
             GridBoxAlignment -> {"Rows" -> {{Top}}}, AutoDelete -> False, 
             GridBoxItemSize -> {
              "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}, 
             BaselinePosition -> {1, 1}]}, 
          Dynamic[Typeset`open$$], ImageSize -> Automatic]},
        "SummaryPanel"],
       DynamicModuleValues:>{}], "]"}],
     InputStream["tmp", 3],
     Editable->False,
     SelectWithContents->True,
     Selectable->False], "]"}]}], "]"}]], "Output",
 CellLabel->"Out[77]=",ExpressionUUID->"676f77f1-3f10-4776-b169-4f447aa8ed7d"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"abc", ",", "x", ",", "\<\"Hello\"\>"}], "}"}]], "Output",
 CellLabel->"Out[78]=",ExpressionUUID->"1e1a221d-22b9-4bf3-b8dc-5872088fe8bd"],

Cell[BoxData["\<\"tmp\"\>"], "Output",
 CellLabel->"Out[79]=",ExpressionUUID->"b7a1d147-4286-40b9-86f1-4f68a158fbf6"]
}, Open  ]]
}, Open  ]]
},
WindowSize->{983, 839},
WindowMargins->{{Automatic, 356}, {51, Automatic}},
PrivateNotebookOptions->{"FileOutlineCache"->False},
ShowGroupOpener->True,
TrackCellChangeTimes->False,
Magnification:>1.3 Inherited,
FrontEndVersion->"11.3 for Microsoft Windows (64-bit) (March 6, 2018)",
StyleDefinitions->"Default.nb"
]
