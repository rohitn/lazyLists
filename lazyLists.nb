Notebook[{
Cell[BoxData[{
 RowBox[{
  RowBox[{"$HistoryLength", "=", "10"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"SetDirectory", "[", 
   RowBox[{"NotebookDirectory", "[", "]"}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{"<<", "lazyLists`"}]}], "Input",
 CellLabel->
  "In[144]:=",ExpressionUUID->"2d6a87cf-3ef1-4832-b8b9-0995d6d1b646"],

Cell[CellGroupData[{

Cell["Usage messages for lazy list constructors and other symbols", \
"Section",ExpressionUUID->"ec4cc4aa-b2ff-4f5e-9ddc-c3f207f96586"],

Cell[CellGroupData[{

Cell["Constructors", \
"Subsection",ExpressionUUID->"270e0702-e686-4de6-bae4-7c5c59474557"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"?", "lazyList"}], "\[IndentingNewLine]", 
 RowBox[{"?", "lazyGenerator"}], "\[IndentingNewLine]", 
 RowBox[{"?", "lazyRange"}], "\[IndentingNewLine]", 
 RowBox[{"?", "lazyPowerRange"}], "\[IndentingNewLine]", 
 RowBox[{"?", "lazyNestList"}], "\[IndentingNewLine]", 
 RowBox[{"?", "lazyStream"}], "\[IndentingNewLine]", 
 RowBox[{"?", "lazyConstantArray"}]}], "Input",
 CellLabel->
  "In[147]:=",ExpressionUUID->"8f1d3194-9e73-46ae-83d7-5e7cad595285"],

Cell[CellGroupData[{

Cell[BoxData["\<\"lazyList is linked list data structure that should contain \
2 elements: the first is the first element, the second a held expression that \
will generate the next linked list when evaluated.\\nYou can extract these \
elements explicitely with First and Last/Rest. Part and Take will not work \
because they have been overloaded with special functionalities when used on \
lazyList.\\nlazyList[list] or lazyList[Hold[var]] is a special constructor \
that generates a lazyList from an ordinary list\"\>"], "Print", "PrintUsage",
 CellTags->
  "Info1473746445521-2110582",ExpressionUUID->"0b6ccc17-3249-4bc1-bb31-\
1601ec4e7b18"],

Cell[BoxData["\<\"lazyGenerator[f, start, min, max, step] generates a \
lazyList that applies f to values {start, start + step, start + 2 step, ...} \
for values between min and max (which are allowed to be infinite).\\nWhen min \
and max are both infinite, symbolic values for start and step are \
allowed\"\>"], "Print", "PrintUsage",
 CellTags->
  "Info1483746445521-2110582",ExpressionUUID->"383d2881-19d5-483f-a8d6-\
c715ad3ab77a"],

Cell[BoxData["\<\"lazyRange[] is a lazy representation of the Integers from 1 \
to \[Infinity]. lazyRange[min, delta] represents values values from min \
onwards in steps of delta. lazyRange has no upper limit\"\>"], "Print", \
"PrintUsage",
 CellTags->
  "Info1493746445521-2110582",ExpressionUUID->"f4e60e76-28e4-4c2b-8ab1-\
159954218897"],

Cell[BoxData["\<\"lazyPowerRange[min, r] is the infinite list {min, r \
\[Times] min, r^2 \[Times] min, ...}\"\>"], "Print", "PrintUsage",
 CellTags->
  "Info1503746445521-2110582",ExpressionUUID->"f3dc958a-6bac-4eea-a6f8-\
c0aebdb0f6f7"],

Cell[BoxData["\<\"lazyNestList[f, elem] is the infinite list {elem, f[elem], \
f[f[elem]], ...} starting with elem and generated by iterating f repeatedly\"\
\>"], "Print", "PrintUsage",
 CellTags->
  "Info1513746445521-2110582",ExpressionUUID->"5e4c27e5-64b8-4ef5-ac99-\
f949b612eff8"],

Cell[BoxData["\<\"lazyStream[streamObject] creates a lazyList that streams \
from streamObject. These streams will stop automatically when EndOfFile is \
reached\"\>"], "Print", "PrintUsage",
 CellTags->
  "Info1523746445522-2110582",ExpressionUUID->"3ba60bb1-55b8-4093-aa84-\
ba63f931f69c"],

Cell[BoxData["\<\"lazyConstantArray[elem] produces an infinite list of copies \
of elem\"\>"], "Print", "PrintUsage",
 CellTags->
  "Info1533746445522-2110582",ExpressionUUID->"c273c884-dd6a-4edf-87ec-\
4a01e58d10b4"]
}, Open  ]]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Operations on finite lazyLists", \
"Subsection",ExpressionUUID->"6d5d1031-631a-41cb-8e58-264d57f52254"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"?", "lazyFiniteTake"}], "\[IndentingNewLine]", 
 RowBox[{"?", "lazyFinitePart"}], "\[IndentingNewLine]", 
 RowBox[{"?", "lazySetState"}]}], "Input",
 CellLabel->
  "In[154]:=",ExpressionUUID->"0937c9c9-1b4b-4347-a8ce-1b460d985208"],

Cell[CellGroupData[{

Cell[BoxData["\<\"lazyFiniteTake[lz, spec] directly applies Take to finite \
lazyLists constructed with lazyList[list] or lazyList[Hold[sym]] without \
having to traverse the lazyList element-by-element. \\nIt is equivalent to \
Take[list, spec]\"\>"], "Print", "PrintUsage",
 CellTags->
  "Info1543746445523-2110582",ExpressionUUID->"16049fae-8dfa-4889-b8ef-\
963dc38e3047"],

Cell[BoxData["\<\"lazyFinitePart[lz, i, j, k,...] directly extracts Part from \
finite lazyLists constructed with lazyList[list] or lazyList[Hold[sym]] \
without having to traverse the lazyList element-by-element. \\nIt is \
equivalent to Part[list, i, j, k, ...]\"\>"], "Print", "PrintUsage",
 CellTags->
  "Info1553746445523-2110582",ExpressionUUID->"18c7ebc8-86b3-4664-aa1b-\
da92263b8b7f"],

Cell[BoxData["\<\"lazySetState[lz, index] with lz a supported lazyList \
returns a lazyList at the specified index. Finite lists and lists generated \
with lazyGenerator are supported\"\>"], "Print", "PrintUsage",
 CellTags->
  "Info1563746445524-2110582",ExpressionUUID->"255176f1-95a7-4e06-88a5-\
a7be2b5485b9"]
}, Open  ]]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Special functions", \
"Subsection",ExpressionUUID->"8161cb60-2662-464e-bd05-1ed7918a050f"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"?", "lazyMapThread"}], "\[IndentingNewLine]", 
 RowBox[{"?", "lazyTranspose"}], "\[IndentingNewLine]", 
 RowBox[{"?", "lazyPartMap"}]}], "Input",
 CellLabel->"In[30]:=",ExpressionUUID->"966ecd04-15a3-4c9a-b904-32be5271d7a0"],

Cell[CellGroupData[{

Cell[BoxData["\<\"lazyMapThread[f, {lz1, lz2, ...}] is similar to MapThread, \
except all elements from the lazyLists are fed to the first slot of f as a \
regular List\"\>"], "Print", "PrintUsage",
 CellTags->
  "Info303746440220-2110582",ExpressionUUID->"14da60e9-d856-4ee1-ac0d-\
ebc309189a98"],

Cell[BoxData["\<\"lazyTranspose[{lz1, lz2, ...}] creates a lazyList with \
tuples of elements from lz1, lz2, etc. \\nEquivalent to \
lazyMapThread[Identity, {lz1, lz2, ...}]\"\>"], "Print", "PrintUsage",
 CellTags->
  "Info313746440220-2110582",ExpressionUUID->"060e70a5-3850-4eed-b11e-\
2d4d1190f9d2"],

Cell[BoxData["\<\"lazyPartMap[l, {i, j, k, ...}] is equivalent to Map[Part[l, \
{#}]&, {i, j, k, ...}] but faster\"\>"], "Print", "PrintUsage",
 CellTags->
  "Info323746440220-2110582",ExpressionUUID->"c656a926-3547-463c-8eb2-\
e0987b6b9581"]
}, Open  ]]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Implementation details", \
"Subsection",ExpressionUUID->"2afa4dd0-09a8-4f37-b66b-767769b7a1f0"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"?", 
  "$lazyIterationLimit"}], "\[IndentingNewLine]", "$lazyIterationLimit"}], \
"Input",
 CellLabel->"In[33]:=",ExpressionUUID->"d8833260-c2e5-4791-808b-7f6f92e54cfe"],

Cell[BoxData["\<\"Iteration limit used for finding successive elements in a \
lazy list\"\>"], "Print", "PrintUsage",
 CellTags->
  "Info333746440220-2110582",ExpressionUUID->"2347e30a-53de-4bc4-b2b0-\
47a53e1f42a0"],

Cell[BoxData["\[Infinity]"], "Output",
 CellLabel->"Out[34]=",ExpressionUUID->"e8332ffd-8c8b-4339-8baa-2204b38465e2"]
}, Open  ]]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Usage examples", \
"Section",ExpressionUUID->"79b459a2-40b2-4d85-ad2a-91269059057f"],

Cell[CellGroupData[{

Cell["Creating lazyLists and extracting elements from them", \
"Subsection",ExpressionUUID->"9cdf5a73-58b8-496b-a090-8a5dfff3450d"],

Cell["\<\
Take and Part will continuously evaluate the next element of lazy list until \
the required elements have been found. \
\>", "Text",ExpressionUUID->"c60618e2-1470-4fc2-98cd-8097bfc68e7d"],

Cell[TextData[{
 StyleBox["Part[lz, n]",
  FontWeight->"Bold"],
 " of a lazyList returns the ",
 Cell[BoxData[
  FormBox[
   SuperscriptBox["n", "th"], TraditionalForm]],ExpressionUUID->
  "6c5aee0c-8734-4191-ae59-aad0159570bd"],
 " element, whereas ",
 StyleBox["Part[lz, {n}]",
  FontWeight->"Bold"],
 " returns a lazyList containing the ",
 Cell[BoxData[
  FormBox[
   SuperscriptBox["n", "th"], TraditionalForm]],ExpressionUUID->
  "f660f97f-81db-4235-83af-42a93ae10da3"],
 " element and the tail of the lazyList. This allows you to keep extracting \
further elements from the returned lazyList without losing progress. The \
lazyList does not keep track of position for efficiency reasons. This is up \
to the user."
}], "Text",ExpressionUUID->"e1df6d75-65c5-48fc-8e85-a9ebc6a57896"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"Part", "[", 
  RowBox[{
   RowBox[{"lazyRange", "[", "]"}], ",", "4"}], "]"}], "\[IndentingNewLine]", 
 RowBox[{"Part", "[", 
  RowBox[{
   RowBox[{"lazyRange", "[", "]"}], ",", 
   RowBox[{"{", "4", "}"}]}], "]"}]}], "Input",
 CellLabel->"In[35]:=",ExpressionUUID->"62f4563c-892f-4239-8057-70dc5511ffaf"],

Cell[BoxData["4"], "Output",
 CellLabel->"Out[35]=",ExpressionUUID->"e8b85ea1-d6b4-40b7-86c7-51c0ea17ed82"],

Cell[BoxData[
 RowBox[{"lazyList", "[", 
  RowBox[{"4", ",", 
   RowBox[{
    RowBox[{"(", 
     RowBox[{
      RowBox[{"lazyList", "[", 
       RowBox[{"#1", ",", 
        RowBox[{"#0", "[", 
         RowBox[{
          RowBox[{"#2", "+", "#1"}], ",", "#2"}], "]"}]}], "]"}], "&"}], 
     ")"}], "[", 
    RowBox[{
     RowBox[{"1", "+", "4"}], ",", "1"}], "]"}]}], "]"}]], "Output",
 CellLabel->"Out[36]=",ExpressionUUID->"9f893348-fbf5-4c65-880c-f6e677e8a351"]
}, Open  ]],

Cell[TextData[{
 "The tail of the lazyList can be evaluated directly with ",
 StyleBox["Last",
  FontWeight->"Bold"],
 " or ",
 StyleBox["Rest",
  FontWeight->"Bold"],
 " and returns a new lazyList. Both function identically:"
}], "Text",ExpressionUUID->"4c55ac1f-4035-43be-8969-6169e18c3552"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"Last", "[", "%", "]"}], "\[IndentingNewLine]", 
 RowBox[{"Rest", "[", "%%", "]"}]}], "Input",
 CellLabel->"In[37]:=",ExpressionUUID->"c4c706ef-5ef3-466d-bcbf-29cde8da1f68"],

Cell[BoxData[
 RowBox[{"lazyList", "[", 
  RowBox[{"5", ",", 
   RowBox[{
    RowBox[{"(", 
     RowBox[{
      RowBox[{"lazyList", "[", 
       RowBox[{"#1", ",", 
        RowBox[{"#0", "[", 
         RowBox[{
          RowBox[{"#2", "+", "#1"}], ",", "#2"}], "]"}]}], "]"}], "&"}], 
     ")"}], "[", 
    RowBox[{
     RowBox[{"1", "+", "5"}], ",", "1"}], "]"}]}], "]"}]], "Output",
 CellLabel->"Out[37]=",ExpressionUUID->"63a6373a-42a3-4098-b55a-73021006ca9a"],

Cell[BoxData[
 RowBox[{"lazyList", "[", 
  RowBox[{"5", ",", 
   RowBox[{
    RowBox[{"(", 
     RowBox[{
      RowBox[{"lazyList", "[", 
       RowBox[{"#1", ",", 
        RowBox[{"#0", "[", 
         RowBox[{
          RowBox[{"#2", "+", "#1"}], ",", "#2"}], "]"}]}], "]"}], "&"}], 
     ")"}], "[", 
    RowBox[{
     RowBox[{"1", "+", "5"}], ",", "1"}], "]"}]}], "]"}]], "Output",
 CellLabel->"Out[38]=",ExpressionUUID->"9563a178-448f-4b2a-939e-6ce8acb08877"]
}, Open  ]],

Cell[TextData[{
 "Multiple indices can be extracted in one go. In this case, the extracted \
elements will go in the first element of the returned lazyList while the tail \
will be left in the state of the highest visited index. ",
 StyleBox["Span",
  FontWeight->"Bold"],
 " is also supported for integers:"
}], "Text",ExpressionUUID->"b80e232f-0514-4341-9156-760672a0e40a"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"Part", "[", 
  RowBox[{
   RowBox[{"lazyRange", "[", "]"}], ",", 
   RowBox[{"{", 
    RowBox[{"1", ",", "4", ",", " ", "10", ",", " ", "5"}], "}"}]}], 
  "]"}], "\[IndentingNewLine]", 
 RowBox[{"Part", "[", 
  RowBox[{
   RowBox[{"lazyRange", "[", "]"}], ",", 
   RowBox[{"10", ";;", "2", ";;", 
    RowBox[{"-", "2"}]}]}], "]"}]}], "Input",
 CellLabel->"In[39]:=",ExpressionUUID->"34dac2ad-2f9f-4764-b2c2-1e8b2142915d"],

Cell[BoxData[
 RowBox[{"lazyList", "[", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{"1", ",", "4", ",", "10", ",", "5"}], "}"}], ",", 
   RowBox[{"lazyList", "[", 
    RowBox[{"10", ",", 
     RowBox[{
      RowBox[{"(", 
       RowBox[{
        RowBox[{"lazyList", "[", 
         RowBox[{"#1", ",", 
          RowBox[{"#0", "[", 
           RowBox[{
            RowBox[{"#2", "+", "#1"}], ",", "#2"}], "]"}]}], "]"}], "&"}], 
       ")"}], "[", 
      RowBox[{
       RowBox[{"1", "+", "10"}], ",", "1"}], "]"}]}], "]"}]}], 
  "]"}]], "Output",
 CellLabel->"Out[39]=",ExpressionUUID->"6a16e2d3-7f3d-4569-9ba2-3d8a5546df78"],

Cell[BoxData[
 RowBox[{"lazyList", "[", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{"10", ",", "8", ",", "6", ",", "4", ",", "2"}], "}"}], ",", 
   RowBox[{"lazyList", "[", 
    RowBox[{"10", ",", 
     RowBox[{
      RowBox[{"(", 
       RowBox[{
        RowBox[{"lazyList", "[", 
         RowBox[{"#1", ",", 
          RowBox[{"#0", "[", 
           RowBox[{
            RowBox[{"#2", "+", "#1"}], ",", "#2"}], "]"}]}], "]"}], "&"}], 
       ")"}], "[", 
      RowBox[{
       RowBox[{"1", "+", "10"}], ",", "1"}], "]"}]}], "]"}]}], 
  "]"}]], "Output",
 CellLabel->"Out[40]=",ExpressionUUID->"395c11ec-c4dd-4f97-a1e6-e7ee6a38726c"]
}, Open  ]],

Cell[TextData[{
 StyleBox["lazyPartMap",
  FontWeight->"Bold"],
 " extracts values at particular indices while also retaining the tails at \
those positions:"
}], "Text",ExpressionUUID->"e9468ffe-b246-46a6-82e3-cce5359f2e50"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"lazyPartMap", "[", 
  RowBox[{
   RowBox[{"lazyRange", "[", "]"}], ",", 
   RowBox[{"Range", "[", 
    RowBox[{"2", ",", "22", ",", "4"}], "]"}]}], "]"}]], "Input",
 CellLabel->"In[41]:=",ExpressionUUID->"f1a4df16-3571-403e-9fa6-237293e18a55"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"lazyList", "[", 
    RowBox[{"2", ",", 
     RowBox[{
      RowBox[{"(", 
       RowBox[{
        RowBox[{"lazyList", "[", 
         RowBox[{"#1", ",", 
          RowBox[{"#0", "[", 
           RowBox[{
            RowBox[{"#2", "+", "#1"}], ",", "#2"}], "]"}]}], "]"}], "&"}], 
       ")"}], "[", 
      RowBox[{
       RowBox[{"1", "+", "2"}], ",", "1"}], "]"}]}], "]"}], ",", 
   RowBox[{"lazyList", "[", 
    RowBox[{"6", ",", 
     RowBox[{
      RowBox[{"(", 
       RowBox[{
        RowBox[{"lazyList", "[", 
         RowBox[{"#1", ",", 
          RowBox[{"#0", "[", 
           RowBox[{
            RowBox[{"#2", "+", "#1"}], ",", "#2"}], "]"}]}], "]"}], "&"}], 
       ")"}], "[", 
      RowBox[{
       RowBox[{"1", "+", "6"}], ",", "1"}], "]"}]}], "]"}], ",", 
   RowBox[{"lazyList", "[", 
    RowBox[{"10", ",", 
     RowBox[{
      RowBox[{"(", 
       RowBox[{
        RowBox[{"lazyList", "[", 
         RowBox[{"#1", ",", 
          RowBox[{"#0", "[", 
           RowBox[{
            RowBox[{"#2", "+", "#1"}], ",", "#2"}], "]"}]}], "]"}], "&"}], 
       ")"}], "[", 
      RowBox[{
       RowBox[{"1", "+", "10"}], ",", "1"}], "]"}]}], "]"}], ",", 
   RowBox[{"lazyList", "[", 
    RowBox[{"14", ",", 
     RowBox[{
      RowBox[{"(", 
       RowBox[{
        RowBox[{"lazyList", "[", 
         RowBox[{"#1", ",", 
          RowBox[{"#0", "[", 
           RowBox[{
            RowBox[{"#2", "+", "#1"}], ",", "#2"}], "]"}]}], "]"}], "&"}], 
       ")"}], "[", 
      RowBox[{
       RowBox[{"1", "+", "14"}], ",", "1"}], "]"}]}], "]"}], ",", 
   RowBox[{"lazyList", "[", 
    RowBox[{"18", ",", 
     RowBox[{
      RowBox[{"(", 
       RowBox[{
        RowBox[{"lazyList", "[", 
         RowBox[{"#1", ",", 
          RowBox[{"#0", "[", 
           RowBox[{
            RowBox[{"#2", "+", "#1"}], ",", "#2"}], "]"}]}], "]"}], "&"}], 
       ")"}], "[", 
      RowBox[{
       RowBox[{"1", "+", "18"}], ",", "1"}], "]"}]}], "]"}], ",", 
   RowBox[{"lazyList", "[", 
    RowBox[{"22", ",", 
     RowBox[{
      RowBox[{"(", 
       RowBox[{
        RowBox[{"lazyList", "[", 
         RowBox[{"#1", ",", 
          RowBox[{"#0", "[", 
           RowBox[{
            RowBox[{"#2", "+", "#1"}], ",", "#2"}], "]"}]}], "]"}], "&"}], 
       ")"}], "[", 
      RowBox[{
       RowBox[{"1", "+", "22"}], ",", "1"}], "]"}]}], "]"}]}], 
  "}"}]], "Output",
 CellLabel->"Out[41]=",ExpressionUUID->"71c3be54-d770-4fe0-8bc6-db52f7d0e457"]
}, Open  ]],

Cell["\<\
Attempting to extract a part that doesn\[CloseCurlyQuote]t exist from a \
finite lazyList will yield a message and return $Failed:\
\>", "Text",ExpressionUUID->"3989a517-8b84-4212-9e72-43c697532a27"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"lz", " ", "=", " ", 
   RowBox[{"lazyList", "[", 
    RowBox[{"Range", "[", "4", "]"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{"lz", "[", 
  RowBox[{"[", "5", "]"}], "]"}], "\[IndentingNewLine]", 
 RowBox[{"lz", "[", 
  RowBox[{"[", 
   RowBox[{"{", "5", "}"}], "]"}], "]"}], "\[IndentingNewLine]", 
 RowBox[{"lz", "[", 
  RowBox[{"[", 
   RowBox[{"{", 
    RowBox[{"2", ",", "5"}], "}"}], "]"}], "]"}], "\[IndentingNewLine]", 
 RowBox[{"lz", "[", 
  RowBox[{"[", 
   RowBox[{"2", ";;", "5"}], "]"}], "]"}]}], "Input",
 CellLabel->"In[42]:=",ExpressionUUID->"32163113-6f5c-4fd9-8bf8-56f7acf65b56"],

Cell[BoxData[
 TemplateBox[{
  "Part","partw",
   "\"Part \\!\\(\\*RowBox[{\\\"5\\\"}]\\) of \\!\\(\\*RowBox[{\\\"lazyList\\\
\", \\\"[\\\", RowBox[{\\\"1\\\", \\\",\\\", \
RowBox[{\\\"lazyLists`Private`lazyFiniteList\\\", \\\"[\\\", RowBox[{RowBox[{\
\\\"\[LeftSkeleton]\\\", \\\"31\\\", \\\"\[RightSkeleton]\\\"}], \\\",\\\", \
RowBox[{\\\"1\\\", \\\"+\\\", \\\"1\\\"}]}], \\\"]\\\"}]}], \\\"]\\\"}]\\) \
does not exist.\"",2,43,1,16512186577037155751,"Local"},
  "MessageTemplate"]], "Message", "MSG",
 CellLabel->
  "During evaluation of \
In[42]:=",ExpressionUUID->"499771a1-5e29-4b32-9da0-21dc3d223b42"],

Cell[BoxData["$Failed"], "Output",
 CellLabel->"Out[43]=",ExpressionUUID->"a1d15a66-799a-4802-bbc1-d6976d63b0da"],

Cell[BoxData[
 TemplateBox[{
  "Part","partw",
   "\"Part \\!\\(\\*RowBox[{\\\"5\\\"}]\\) of \\!\\(\\*RowBox[{\\\"lazyList\\\
\", \\\"[\\\", RowBox[{\\\"1\\\", \\\",\\\", \
RowBox[{\\\"lazyLists`Private`lazyFiniteList\\\", \\\"[\\\", RowBox[{RowBox[{\
\\\"\[LeftSkeleton]\\\", \\\"31\\\", \\\"\[RightSkeleton]\\\"}], \\\",\\\", \
RowBox[{\\\"1\\\", \\\"+\\\", \\\"1\\\"}]}], \\\"]\\\"}]}], \\\"]\\\"}]\\) \
does not exist.\"",2,44,2,16512186577037155751,"Local"},
  "MessageTemplate"]], "Message", "MSG",
 CellLabel->
  "During evaluation of \
In[42]:=",ExpressionUUID->"80c66cf3-2b6a-4933-af53-99db35a47737"],

Cell[BoxData["$Failed"], "Output",
 CellLabel->"Out[44]=",ExpressionUUID->"24682afb-e3b1-47e8-94be-85e8d46357ce"],

Cell[BoxData[
 TemplateBox[{
  "Part","partw",
   "\"Part \\!\\(\\*RowBox[{\\\"4\\\"}]\\) of \\!\\(\\*RowBox[{\\\"lazyList\\\
\", \\\"[\\\", RowBox[{\\\"2\\\", \\\",\\\", \
RowBox[{\\\"lazyLists`Private`lazyFiniteList\\\", \\\"[\\\", RowBox[{RowBox[{\
\\\"\[LeftSkeleton]\\\", \\\"31\\\", \\\"\[RightSkeleton]\\\"}], \\\",\\\", \
RowBox[{\\\"2\\\", \\\"+\\\", \\\"1\\\"}]}], \\\"]\\\"}]}], \\\"]\\\"}]\\) \
does not exist.\"",2,45,3,16512186577037155751,"Local"},
  "MessageTemplate"]], "Message", "MSG",
 CellLabel->
  "During evaluation of \
In[42]:=",ExpressionUUID->"57200c04-3e9b-4a95-8089-343f4560c92f"],

Cell[BoxData["$Failed"], "Output",
 CellLabel->"Out[45]=",ExpressionUUID->"cc196c5c-9039-46f7-a66f-8adc5eff1c42"],

Cell[BoxData[
 TemplateBox[{
  "Part","partw",
   "\"Part \\!\\(\\*RowBox[{\\\"5\\\"}]\\) of \\!\\(\\*RowBox[{\\\"lazyList\\\
\", \\\"[\\\", RowBox[{\\\"1\\\", \\\",\\\", \
RowBox[{\\\"lazyLists`Private`lazyFiniteList\\\", \\\"[\\\", RowBox[{RowBox[{\
\\\"\[LeftSkeleton]\\\", \\\"31\\\", \\\"\[RightSkeleton]\\\"}], \\\",\\\", \
RowBox[{\\\"1\\\", \\\"+\\\", \\\"1\\\"}]}], \\\"]\\\"}]}], \\\"]\\\"}]\\) \
does not exist.\"",2,46,4,16512186577037155751,"Local"},
  "MessageTemplate"]], "Message", "MSG",
 CellLabel->
  "During evaluation of \
In[42]:=",ExpressionUUID->"1d5dc419-e4b9-4829-9a4b-c25b0d4e6a3e"],

Cell[BoxData["$Failed"], "Output",
 CellLabel->"Out[46]=",ExpressionUUID->"9f2eebad-5e6e-4e05-a8e1-00764db009eb"]
}, Open  ]],

Cell[TextData[{
 StyleBox["Take",
  FontWeight->"Bold"],
 " of lazyList returns lazyList. The first element is a list of the extracted \
elements. The tail is a lazyList at the point where take stopped. Note that \
there will be an overlap of 1 if you continue extracting elements form the \
returned lazyList (this is necessary to avoid unnecessary evaluations of \
elements)."
}], "Text",ExpressionUUID->"66aa0271-c1d7-444e-bd61-b1bc2b426edf"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"list", "=", 
   RowBox[{"Take", "[", 
    RowBox[{
     RowBox[{"lazyRange", "[", "]"}], ",", "4"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{"First", "[", "list", "]"}], "\[IndentingNewLine]", 
 RowBox[{"Last", "[", "list", "]"}], "\[IndentingNewLine]", 
 RowBox[{"Take", "[", 
  RowBox[{
   RowBox[{"Last", "[", "list", "]"}], ",", "5"}], "]"}]}], "Input",
 CellLabel->"In[47]:=",ExpressionUUID->"0deb31ae-48a0-4c10-b1c5-60e740712aa2"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"1", ",", "2", ",", "3", ",", "4"}], "}"}]], "Output",
 CellLabel->"Out[48]=",ExpressionUUID->"bd12c8a9-7210-4284-8935-9b8fba744040"],

Cell[BoxData[
 RowBox[{"lazyList", "[", 
  RowBox[{"4", ",", 
   RowBox[{
    RowBox[{"(", 
     RowBox[{
      RowBox[{"lazyList", "[", 
       RowBox[{"#1", ",", 
        RowBox[{"#0", "[", 
         RowBox[{
          RowBox[{"#2", "+", "#1"}], ",", "#2"}], "]"}]}], "]"}], "&"}], 
     ")"}], "[", 
    RowBox[{
     RowBox[{"1", "+", "4"}], ",", "1"}], "]"}]}], "]"}]], "Output",
 CellLabel->"Out[49]=",ExpressionUUID->"dfbd9aa6-f9d2-4231-8ffe-d1699f36629f"],

Cell[BoxData[
 RowBox[{"lazyList", "[", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{"4", ",", "5", ",", "6", ",", "7", ",", "8"}], "}"}], ",", 
   RowBox[{"lazyList", "[", 
    RowBox[{"8", ",", 
     RowBox[{
      RowBox[{"(", 
       RowBox[{
        RowBox[{"lazyList", "[", 
         RowBox[{"#1", ",", 
          RowBox[{"#0", "[", 
           RowBox[{
            RowBox[{"#2", "+", "#1"}], ",", "#2"}], "]"}]}], "]"}], "&"}], 
       ")"}], "[", 
      RowBox[{
       RowBox[{"1", "+", "8"}], ",", "1"}], "]"}]}], "]"}]}], "]"}]], "Output",
 CellLabel->"Out[50]=",ExpressionUUID->"09972774-6ac8-4f54-b096-54713fc8d839"]
}, Open  ]],

Cell["It is possible to specify a lower and upper index for Take:", \
"Text",ExpressionUUID->"8a0ddc07-8ca8-415e-9861-4912dc4f0514"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"Take", "[", 
  RowBox[{
   RowBox[{"lazyRange", "[", "]"}], ",", 
   RowBox[{"{", 
    RowBox[{"5", ",", "10"}], "}"}]}], "]"}], "\[IndentingNewLine]", 
 RowBox[{"Take", "[", 
  RowBox[{
   RowBox[{"lazyRange", "[", "]"}], ",", 
   RowBox[{"{", 
    RowBox[{"10", ",", "5"}], "}"}]}], "]"}]}], "Input",
 CellLabel->"In[51]:=",ExpressionUUID->"65961842-2921-4b5c-bbac-e02cfc7d40ba"],

Cell[BoxData[
 RowBox[{"lazyList", "[", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{"5", ",", "6", ",", "7", ",", "8", ",", "9", ",", "10"}], "}"}], 
   ",", 
   RowBox[{"lazyList", "[", 
    RowBox[{"10", ",", 
     RowBox[{
      RowBox[{"(", 
       RowBox[{
        RowBox[{"lazyList", "[", 
         RowBox[{"#1", ",", 
          RowBox[{"#0", "[", 
           RowBox[{
            RowBox[{"#2", "+", "#1"}], ",", "#2"}], "]"}]}], "]"}], "&"}], 
       ")"}], "[", 
      RowBox[{
       RowBox[{"1", "+", "10"}], ",", "1"}], "]"}]}], "]"}]}], 
  "]"}]], "Output",
 CellLabel->"Out[51]=",ExpressionUUID->"01ea3f39-9bc2-4ab8-a58e-c17c13158681"],

Cell[BoxData[
 RowBox[{"lazyList", "[", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{"10", ",", "9", ",", "8", ",", "7", ",", "6", ",", "5"}], "}"}], 
   ",", 
   RowBox[{"lazyList", "[", 
    RowBox[{"10", ",", 
     RowBox[{
      RowBox[{"(", 
       RowBox[{
        RowBox[{"lazyList", "[", 
         RowBox[{"#1", ",", 
          RowBox[{"#0", "[", 
           RowBox[{
            RowBox[{"#2", "+", "#1"}], ",", "#2"}], "]"}]}], "]"}], "&"}], 
       ")"}], "[", 
      RowBox[{
       RowBox[{"1", "+", "10"}], ",", "1"}], "]"}]}], "]"}]}], 
  "]"}]], "Output",
 CellLabel->"Out[52]=",ExpressionUUID->"2fcfd13b-6314-4bde-a5d4-505704b140c1"]
}, Open  ]],

Cell["\<\
Take will not issue a message if indices are requested beyond the length of \
the lazyList:\
\>", "Text",ExpressionUUID->"54f32590-2da2-49e5-b01e-8657a6c320f2"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"Take", "[", 
  RowBox[{"lz", ",", "5"}], "]"}], "\[IndentingNewLine]", 
 RowBox[{"Take", "[", 
  RowBox[{"lz", ",", 
   RowBox[{"{", 
    RowBox[{"3", ",", "5"}], "}"}]}], "]"}], "\[IndentingNewLine]", 
 RowBox[{"Take", "[", 
  RowBox[{"lz", ",", 
   RowBox[{"{", 
    RowBox[{"5", ",", "10"}], "}"}]}], "]"}], "\[IndentingNewLine]", 
 RowBox[{"Take", "[", 
  RowBox[{"lz", ",", 
   RowBox[{"{", 
    RowBox[{"10", ",", "3"}], "}"}]}], "]"}]}], "Input",
 CellLabel->"In[53]:=",ExpressionUUID->"ab6d13e6-fbcc-488f-9ed1-1029e38d203f"],

Cell[BoxData[
 RowBox[{"lazyList", "[", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{"1", ",", "2", ",", "3", ",", "4"}], "}"}], ",", 
   RowBox[{"lazyList", "[", "]"}]}], "]"}]], "Output",
 CellLabel->"Out[53]=",ExpressionUUID->"aa1f7dd6-4486-48e8-8219-92dc7e4061d4"],

Cell[BoxData[
 RowBox[{"lazyList", "[", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{"3", ",", "4"}], "}"}], ",", 
   RowBox[{"lazyList", "[", "]"}]}], "]"}]], "Output",
 CellLabel->"Out[54]=",ExpressionUUID->"bb599c2e-8792-4383-9e3a-c3ac93859c16"],

Cell[BoxData[
 RowBox[{"lazyList", "[", "]"}]], "Output",
 CellLabel->"Out[55]=",ExpressionUUID->"c49a7841-49ed-4281-bf7b-af4e4f1d4472"],

Cell[BoxData[
 RowBox[{"lazyList", "[", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{"4", ",", "3"}], "}"}], ",", 
   RowBox[{"lazyList", "[", "]"}]}], "]"}]], "Output",
 CellLabel->"Out[56]=",ExpressionUUID->"aa99b305-90d0-4ff1-af55-836a7f99e1bf"]
}, Open  ]],

Cell[TextData[{
 StyleBox["TakeWhile",
  FontWeight->"Bold"],
 " also works with lazyLists. Note that the tail of the returned lazyList \
contains the first element that didn\[CloseCurlyQuote]t pass the test:"
}], "Text",ExpressionUUID->"d9a560d3-261a-4f9c-bb6c-955eabdcb76c"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"TakeWhile", "[", 
  RowBox[{
   RowBox[{"lazyPowerRange", "[", 
    RowBox[{"2", ",", "2"}], "]"}], ",", 
   RowBox[{
    RowBox[{"#", "<", "100"}], "&"}]}], "]"}]], "Input",
 CellLabel->"In[57]:=",ExpressionUUID->"81c528c1-fbff-4d04-adb4-9a8335001936"],

Cell[BoxData[
 RowBox[{"lazyList", "[", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{"2", ",", "4", ",", "8", ",", "16", ",", "32", ",", "64"}], "}"}],
    ",", 
   RowBox[{"lazyList", "[", 
    RowBox[{"128", ",", 
     RowBox[{
      RowBox[{"(", 
       RowBox[{
        RowBox[{"lazyList", "[", 
         RowBox[{"#1", ",", 
          RowBox[{"#0", "[", 
           RowBox[{
            RowBox[{"#2", " ", "#1"}], ",", "#2"}], "]"}]}], "]"}], "&"}], 
       ")"}], "[", 
      RowBox[{
       RowBox[{"2", " ", "128"}], ",", "2"}], "]"}]}], "]"}]}], 
  "]"}]], "Output",
 CellLabel->"Out[57]=",ExpressionUUID->"66bab6fc-fa56-4717-98a0-9e0f8d019626"]
}, Open  ]],

Cell["\<\
Normal lists can be converted into lazyLists by wrapping lazyList around \
them. The list is stored in a variable and is streamed element-by-element:\
\>", "Text",ExpressionUUID->"115e41b9-6140-442b-806c-1dc1bda77a77"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"First", "@", 
  RowBox[{"Take", "[", 
   RowBox[{
    RowBox[{"lazyList", "[", 
     RowBox[{"Fibonacci", "[", 
      RowBox[{"Range", "[", "10", "]"}], "]"}], "]"}], ",", "5"}], 
   "]"}]}]], "Input",
 CellLabel->"In[58]:=",ExpressionUUID->"a71ae506-2558-4576-96a7-cd81d08eff10"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"1", ",", "1", ",", "2", ",", "3", ",", "5"}], "}"}]], "Output",
 CellLabel->"Out[58]=",ExpressionUUID->"b6ae1dbc-751b-44d5-b22f-1d8fad8ce1a0"]
}, Open  ]],

Cell["\<\
It is also possible to turn a symbol that refers to a list into a lazyList by \
wrapping Hold around it:\
\>", "Text",ExpressionUUID->"49cab4cf-9bc5-40f6-b882-1a4b1090df44"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"list", "=", 
   RowBox[{"Fibonacci", "[", 
    RowBox[{"Range", "[", "10", "]"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{"finiteLz", "=", 
  RowBox[{"lazyList", "[", 
   RowBox[{"Hold", "[", "list", "]"}], "]"}]}], "\[IndentingNewLine]", 
 RowBox[{"First", "@", 
  RowBox[{"Take", "[", 
   RowBox[{"finiteLz", ",", "5"}], "]"}]}]}], "Input",
 CellLabel->"In[59]:=",ExpressionUUID->"ddb15fbb-3cb6-4cd4-933f-c1f27036e5d5"],

Cell[BoxData[
 RowBox[{"lazyList", "[", 
  RowBox[{"1", ",", 
   RowBox[{"lazyLists`Private`lazyFiniteList", "[", 
    RowBox[{"list", ",", 
     RowBox[{"1", "+", "1"}]}], "]"}]}], "]"}]], "Output",
 CellLabel->"Out[60]=",ExpressionUUID->"24c84b97-5966-4f23-a875-ae2fd543e2ad"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"1", ",", "1", ",", "2", ",", "3", ",", "5"}], "}"}]], "Output",
 CellLabel->"Out[61]=",ExpressionUUID->"7f735075-73f2-4f55-9801-47836f8f69f8"]
}, Open  ]],

Cell[TextData[{
 StyleBox["lazyFinitePart",
  FontWeight->"Bold"],
 " and ",
 StyleBox["lazyFiniteTake",
  FontWeight->"Bold"],
 " can be used to extract parts from lazyLists directly from the underlying \
symbol without having to traverse the lazyList:"
}], "Text",ExpressionUUID->"faf5e77f-060d-427c-a054-f7015d144306"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"lazyFinitePart", "[", 
   RowBox[{"finiteLz", ",", "4"}], "]"}], " ", "===", " ", 
  RowBox[{"Part", "[", 
   RowBox[{"list", ",", "4"}], "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"lazyFiniteTake", "[", 
   RowBox[{"finiteLz", ",", 
    RowBox[{"{", 
     RowBox[{"2", ",", "4"}], "}"}]}], "]"}], "===", 
  RowBox[{"Take", "[", 
   RowBox[{"list", ",", 
    RowBox[{"{", 
     RowBox[{"2", ",", "4"}], "}"}]}], "]"}]}]}], "Input",
 CellLabel->"In[62]:=",ExpressionUUID->"1e24ba46-7d8b-4e06-87a9-4207f4abd148"],

Cell[BoxData["True"], "Output",
 CellLabel->"Out[62]=",ExpressionUUID->"44226078-944b-4f41-9de2-9b6cb23cdcbf"],

Cell[BoxData["True"], "Output",
 CellLabel->"Out[63]=",ExpressionUUID->"f9b8435b-233d-4b21-97d1-9fd81418a627"]
}, Open  ]],

Cell["\<\
lazySetState can be used to directly move a finite lazyList to a given index \
without traversing. Also supports going to the last index directly:\
\>", "Text",ExpressionUUID->"804de8df-4c8c-44d9-9302-8e8e55b8935d"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"lazySetState", "[", 
  RowBox[{"finiteLz", ",", 
   RowBox[{"-", "1"}]}], "]"}]], "Input",
 CellLabel->
  "In[157]:=",ExpressionUUID->"823d9361-a12a-41f0-94a7-227f8178948c"],

Cell[BoxData[
 RowBox[{"lazyList", "[", 
  RowBox[{"55", ",", 
   RowBox[{"lazyLists`Private`lazyFiniteList", "[", 
    RowBox[{"list", ",", 
     RowBox[{"10", "+", "1"}]}], "]"}]}], "]"}]], "Output",
 CellLabel->"Out[157]=",ExpressionUUID->"a82d0bce-c988-433d-85cd-ed76e1ad324e"]
}, Open  ]],

Cell[TextData[{
 "lazyLists can be transposed with ",
 StyleBox["lazyTranspose",
  FontWeight->"Bold"],
 ":"
}], "Text",ExpressionUUID->"c76a374a-4a99-4e7e-89a6-b031331f12d0"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"First", "@", 
  RowBox[{"Take", "[", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"lazyTranspose", "[", "\[IndentingNewLine]", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"lazyRange", "[", "]"}], ",", 
       RowBox[{"lazyConstantArray", "[", "0", "]"}]}], "}"}], 
     "\[IndentingNewLine]", "]"}], ",", "\[IndentingNewLine]", "5"}], 
   "\[IndentingNewLine]", "]"}]}]], "Input",
 CellLabel->"In[65]:=",ExpressionUUID->"01271068-9a2f-4f9f-bdc4-c0b467f0c7b9"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{"1", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"2", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"3", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"4", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"5", ",", "0"}], "}"}]}], "}"}]], "Output",
 CellLabel->"Out[65]=",ExpressionUUID->"3adf216b-c209-47a1-90f6-5c7f9c8cbf85"]
}, Open  ]],

Cell[CellGroupData[{

Cell["Lazy generator", \
"Subsubsection",ExpressionUUID->"26898ac6-d54e-450a-a936-857ee5fc5b92"],

Cell[TextData[{
 StyleBox["lazyGenerator",
  FontWeight->"Bold"],
 " is used to generate lazyLists from a generating function in much the same \
way as Table. It has 5 arguments: ",
 Cell[BoxData[
  FormBox[
   RowBox[{"lazyGenerator", "[", 
    RowBox[{
    "fun", ",", " ", "start", ",", " ", "min", ",", " ", "max", ",", " ", 
     "step"}], "]"}], TraditionalForm]],
  FormatType->"TraditionalForm",ExpressionUUID->
  "4d0fa8ac-3001-48d3-90e0-697b8ca3e5a3"]
}], "Text",ExpressionUUID->"091a7650-9a36-4c83-987b-e4b754a39857"],

Cell[CellGroupData[{

Cell[TextData[{
 Cell[BoxData[
  FormBox["fun", TraditionalForm]],
  FormatType->"TraditionalForm",ExpressionUUID->
  "0224669c-b117-4ae9-b79e-00a105d14d99"],
 " the generating function"
}], "Item",ExpressionUUID->"127b423b-e334-4122-8740-ad04296ed7c5"],

Cell[TextData[{
 Cell[BoxData[
  FormBox["start", TraditionalForm]],
  FormatType->"TraditionalForm",ExpressionUUID->
  "03d24386-0c6c-4a65-8c91-4cb9f816d482"],
 " the starting value to apply the function to. Defaults to 1"
}], "Item",ExpressionUUID->"28bd2c1a-daa5-4650-a0b8-ee46a1046a75"],

Cell[TextData[{
 Cell[BoxData[
  FormBox[
   RowBox[{"min", ",", " ", "max"}], TraditionalForm]],
  FormatType->"TraditionalForm",ExpressionUUID->
  "7ef99663-e50a-454e-8161-f090c09e8f65"],
 " The minimum values fun can be applied to. Default to ",
 Cell[BoxData[
  FormBox[
   RowBox[{"-", "\[Infinity]"}], TraditionalForm]],
  FormatType->"TraditionalForm",ExpressionUUID->
  "7d85d512-abf4-4551-aa9e-950b8128004d"],
 " and ",
 Cell[BoxData[
  FormBox[
   RowBox[{"+", "\[Infinity]"}], TraditionalForm]],
  FormatType->"TraditionalForm",ExpressionUUID->
  "21231119-7098-4895-b137-49b3daa5ccb4"]
}], "Item",ExpressionUUID->"507dfb61-60fe-4375-94ae-bbda9b21f2cd"],

Cell[TextData[{
 Cell[BoxData[
  FormBox["step", TraditionalForm]],
  FormatType->"TraditionalForm",ExpressionUUID->
  "dc5325ce-8947-4333-9383-014dd4cbe392"],
 " the step size with which to increase the iterator of the table after each \
step. Defaults to 1"
}], "Item",ExpressionUUID->"a64d6517-5c3f-4592-88c7-50f1c70777c8"]
}, Open  ]],

Cell["\<\
The simplest form of lazyGenerator just specifies the function:\
\>", "Text",ExpressionUUID->"bd0674b1-8f96-4da1-9da1-6a8c201faba7"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"infiniteInBothDirections", " ", "=", " ", 
  RowBox[{"lazyGenerator", "[", "f", "]"}]}], "\[IndentingNewLine]", 
 RowBox[{"First", "@", 
  RowBox[{"Take", "[", 
   RowBox[{"infiniteInBothDirections", ",", "5"}], "]"}]}]}], "Input",
 CellLabel->
  "In[117]:=",ExpressionUUID->"cdb0de3c-6d7d-45d4-b18d-c463f687a508"],

Cell[BoxData[
 RowBox[{"lazyList", "[", 
  RowBox[{
   RowBox[{"f", "[", "1", "]"}], ",", 
   RowBox[{"lazyLists`Private`twoSidedGenerator", "[", 
    RowBox[{"f", ",", 
     RowBox[{"1", "+", "1"}], ",", "1"}], "]"}]}], "]"}]], "Output",
 CellLabel->
  "Out[117]=",ExpressionUUID->"10da6c61-5cba-4489-b8ac-ef69bda5abf7"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"f", "[", "1", "]"}], ",", 
   RowBox[{"f", "[", "2", "]"}], ",", 
   RowBox[{"f", "[", "3", "]"}], ",", 
   RowBox[{"f", "[", "4", "]"}], ",", 
   RowBox[{"f", "[", "5", "]"}]}], "}"}]], "Output",
 CellLabel->"Out[118]=",ExpressionUUID->"f309b3a6-48cf-4e80-84d8-fb3a3ab4841b"]
}, Open  ]],

Cell["\<\
If the min and max limits are infinite, you can do symbolic steps:\
\>", "Text",ExpressionUUID->"2ee55deb-c936-404c-9dfc-eb155afb151a"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"symbolicGenerator", " ", "=", " ", 
  RowBox[{"lazyGenerator", "[", 
   RowBox[{"f", ",", " ", "start", ",", " ", 
    RowBox[{"-", "\[Infinity]"}], ",", "\[Infinity]", ",", "step"}], 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{"First", "@", 
  RowBox[{"Take", "[", 
   RowBox[{"symbolicGenerator", ",", " ", "5"}], "]"}]}]}], "Input",
 CellLabel->
  "In[123]:=",ExpressionUUID->"1fa6793f-bf16-4356-b0a4-72b0956494dc"],

Cell[BoxData[
 RowBox[{"lazyList", "[", 
  RowBox[{
   RowBox[{"f", "[", "start", "]"}], ",", 
   RowBox[{"lazyLists`Private`twoSidedGenerator", "[", 
    RowBox[{"f", ",", 
     RowBox[{"start", "+", "step"}], ",", "step"}], "]"}]}], "]"}]], "Output",
 CellLabel->
  "Out[123]=",ExpressionUUID->"f95618c8-2f7f-4ce8-8b31-df0f918cfa54"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"f", "[", "start", "]"}], ",", 
   RowBox[{"f", "[", 
    RowBox[{"start", "+", "step"}], "]"}], ",", 
   RowBox[{"f", "[", 
    RowBox[{"start", "+", 
     RowBox[{"2", " ", "step"}]}], "]"}], ",", 
   RowBox[{"f", "[", 
    RowBox[{"start", "+", 
     RowBox[{"3", " ", "step"}]}], "]"}], ",", 
   RowBox[{"f", "[", 
    RowBox[{"start", "+", 
     RowBox[{"4", " ", "step"}]}], "]"}]}], "}"}]], "Output",
 CellLabel->"Out[124]=",ExpressionUUID->"8b3089a1-080b-4d61-a91a-bb6da6f36838"]
}, Open  ]],

Cell["\<\
If limits are specified, the start and step have to be numeric. Take will \
automatically stop when a limit is reached:\
\>", "Text",ExpressionUUID->"ec412910-8086-4f94-8383-07ef4488ff6c"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"First", "@", 
  RowBox[{"Take", "[", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"lazyGenerator", "[", 
     RowBox[{"f", ",", " ", "2", ",", " ", "1", ",", "10", ",", "2"}], "]"}], 
    ",", "\[IndentingNewLine]", "50"}], "\[IndentingNewLine]", 
   "]"}]}]], "Input",
 CellLabel->
  "In[139]:=",ExpressionUUID->"5f275465-d56b-4871-b8e1-19eda807544d"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"f", "[", "2", "]"}], ",", 
   RowBox[{"f", "[", "4", "]"}], ",", 
   RowBox[{"f", "[", "6", "]"}], ",", 
   RowBox[{"f", "[", "8", "]"}], ",", 
   RowBox[{"f", "[", "10", "]"}]}], "}"}]], "Output",
 CellLabel->"Out[139]=",ExpressionUUID->"998f10ec-a4b6-47d8-b0b9-807de3667180"]
}, Open  ]],

Cell[TextData[{
 StyleBox["lazySetState",
  FontWeight->"Bold"],
 " can be used with lazyGenerator lists. It override the current position of \
the generator and reset it to the given value. Notice that this means that \
this can create a completely different generator if it is set to a value the \
original would never visit. The step size and min/max values are retained:"
}], "Text",ExpressionUUID->"1e034299-8ca5-4d23-a766-3a7fb63544ce"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"l", " ", "=", " ", 
  RowBox[{"Take", "[", 
   RowBox[{
    RowBox[{"lazyGenerator", "[", 
     RowBox[{"f", ",", " ", "2", ",", " ", "1", ",", "10", ",", "2"}], "]"}], 
    ",", "3"}], "]"}]}], "\[IndentingNewLine]", 
 RowBox[{"Take", "[", "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{"lazySetState", "[", 
    RowBox[{
     RowBox[{"Last", "[", "l", "]"}], ",", "3"}], "]"}], ",", 
   "\[IndentingNewLine]", "3"}], "\[IndentingNewLine]", 
  "]"}]}], "Input",ExpressionUUID->"cd734a99-8091-4dc1-8e3e-b6f7adc74e54"],

Cell[BoxData[
 RowBox[{"lazyList", "[", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{
     RowBox[{"f", "[", "2", "]"}], ",", 
     RowBox[{"f", "[", "4", "]"}], ",", 
     RowBox[{"f", "[", "6", "]"}]}], "}"}], ",", 
   RowBox[{"lazyList", "[", 
    RowBox[{
     RowBox[{"f", "[", "6", "]"}], ",", 
     RowBox[{"lazyLists`Private`finiteGenerator", "[", 
      RowBox[{"f", ",", 
       RowBox[{"6", "+", "2"}], ",", "1", ",", "10", ",", "2"}], "]"}]}], 
    "]"}]}], "]"}]], "Output",
 CellLabel->
  "Out[160]=",ExpressionUUID->"de06df4c-ccdd-4eb7-a6f6-47f0cd57e3a8"],

Cell[BoxData[
 RowBox[{"lazyList", "[", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{
     RowBox[{"f", "[", "3", "]"}], ",", 
     RowBox[{"f", "[", "5", "]"}], ",", 
     RowBox[{"f", "[", "7", "]"}]}], "}"}], ",", 
   RowBox[{"lazyList", "[", 
    RowBox[{
     RowBox[{"f", "[", "7", "]"}], ",", 
     RowBox[{"lazyLists`Private`finiteGenerator", "[", 
      RowBox[{"f", ",", 
       RowBox[{"7", "+", "2"}], ",", "1", ",", "10", ",", "2"}], "]"}]}], 
    "]"}]}], "]"}]], "Output",
 CellLabel->"Out[161]=",ExpressionUUID->"dd5afdb5-38ae-4723-87a7-d4ab56c62c25"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Lazy file streams", \
"Subsubsection",ExpressionUUID->"6d9500cf-eaaf-4ac9-97d8-236f0b90d0fa"],

Cell["lazyLists can be used with InputStreams. First make a file:", \
"Text",ExpressionUUID->"f082c183-c495-4435-9420-7573f759251c"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"stmp", "=", 
   RowBox[{"OpenWrite", "[", "\"\<tmp\>\"", "]"}]}], ";"}], "\n", 
 RowBox[{"Write", "[", 
  RowBox[{"stmp", ",", "a", ",", "b", ",", "c"}], "]"}], "\n", 
 RowBox[{"Write", "[", 
  RowBox[{"stmp", ",", "x"}], "]"}], "\n", 
 RowBox[{"Write", "[", 
  RowBox[{"stmp", ",", "\"\<Hello\>\""}], "]"}], "\[IndentingNewLine]", 
 RowBox[{"Write", "[", 
  RowBox[{"stmp", ",", "\"\<Hello\>\""}], "]"}], "\[IndentingNewLine]", 
 RowBox[{"Write", "[", 
  RowBox[{"stmp", ",", "\"\<Hello\>\""}], "]"}], "\[IndentingNewLine]", 
 RowBox[{"Close", "[", "stmp", "]"}]}], "Input",
 CellLabel->"In[66]:=",
 CellID->28621,ExpressionUUID->"56e7c7ce-37ef-4877-9931-7dd9f3a12e91"],

Cell[BoxData["\<\"tmp\"\>"], "Output",
 CellLabel->"Out[72]=",ExpressionUUID->"7f584eed-37d2-4e04-9c90-e497ebd2224c"]
}, Open  ]],

Cell["Open a reading stream and make a lazyList out of it:", \
"Text",ExpressionUUID->"a3290700-5172-4544-bd8e-a4ce7202ecbb"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Module", "[", 
  RowBox[{
   RowBox[{"{", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"stream", "=", 
      RowBox[{"OpenRead", "[", "\"\<tmp\>\"", "]"}]}], ",", 
     "\[IndentingNewLine]", "result"}], "\[IndentingNewLine]", "}"}], ",", 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"result", "=", 
     RowBox[{"First", "@", 
      RowBox[{"Take", "[", 
       RowBox[{
        RowBox[{"lazyStream", "[", "stream", "]"}], ",", "3"}], "]"}]}]}], 
    ";", "\[IndentingNewLine]", 
    RowBox[{"Close", "[", "stream", "]"}], ";", "\[IndentingNewLine]", 
    "result"}]}], "\[IndentingNewLine]", "]"}]], "Input",
 CellLabel->"In[73]:=",ExpressionUUID->"397a2c85-f736-4613-8c9b-d8a642960c89"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"abc", ",", "x", ",", "\<\"Hello\"\>"}], "}"}]], "Output",
 CellLabel->"Out[73]=",ExpressionUUID->"5a75bc1a-a3d8-4e87-b893-722c2a05c979"]
}, Open  ]],

Cell["\<\
The stream will cut out automatically when it reaches the end of the file:\
\>", "Text",ExpressionUUID->"57ec74de-bf80-4038-9fb8-21b16a056923"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Module", "[", 
  RowBox[{
   RowBox[{"{", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"stream", "=", 
      RowBox[{"OpenRead", "[", "\"\<tmp\>\"", "]"}]}], ",", 
     "\[IndentingNewLine]", "result"}], "\[IndentingNewLine]", "}"}], ",", 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"result", "=", 
     RowBox[{"First", "@", 
      RowBox[{"TakeWhile", "[", 
       RowBox[{
        RowBox[{"lazyStream", "[", "stream", "]"}], ",", 
        RowBox[{"True", "&"}]}], "]"}]}]}], ";", "\[IndentingNewLine]", 
    RowBox[{"Close", "[", "stream", "]"}], ";", "\[IndentingNewLine]", 
    "result"}]}], "\[IndentingNewLine]", "]"}]], "Input",
 CellLabel->"In[74]:=",ExpressionUUID->"71fdd96b-ab00-400c-a4be-632c2ee366b4"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
  "abc", ",", "x", ",", "\<\"Hello\"\>", ",", "\<\"Hello\"\>", 
   ",", "\<\"Hello\"\>", ",", "EndOfFile"}], "}"}]], "Output",
 CellLabel->"Out[74]=",ExpressionUUID->"4a86f5a2-b131-4013-993e-a96366bc2cbd"]
}, Open  ]],

Cell[TextData[{
 StyleBox["Plus",
  FontWeight->"Bold"],
 ", ",
 StyleBox["Times",
  FontWeight->"Bold"],
 ", ",
 StyleBox["Power",
  FontWeight->"Bold"],
 ", ",
 StyleBox["Divide",
  FontWeight->"Bold"],
 ", and ",
 StyleBox["Subtract ",
  FontWeight->"Bold"],
 "thread over lazyLists, though these functionalities are far less efficient \
than for ordinary lists and should probably be avoided if the same can be \
achieved with FoldList or Map"
}], "Text",ExpressionUUID->"d3f5e510-6511-42f7-bf7f-18d13a7c0060"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"First", " ", "@", " ", 
  RowBox[{"Take", "[", 
   RowBox[{
    RowBox[{
     RowBox[{"lazyRange", "[", "]"}], "+", 
     RowBox[{"lazyRange", "[", "2", "]"}]}], ",", "5"}], 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{"First", " ", "@", " ", 
  RowBox[{"Take", "[", 
   RowBox[{
    RowBox[{
     RowBox[{"2", "*", " ", 
      RowBox[{"lazyRange", "[", "]"}]}], "+", 
     RowBox[{"3", " ", 
      RowBox[{"lazyRange", "[", 
       RowBox[{"1", ",", "2"}], "]"}]}]}], ",", "5"}], 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{"First", " ", "@", " ", 
  RowBox[{"Take", "[", 
   RowBox[{
    RowBox[{
     RowBox[{"lazyRange", "[", "]"}], "^", 
     RowBox[{"lazyRange", "[", "]"}]}], ",", "5"}], 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{"First", " ", "@", " ", 
  RowBox[{"Take", "[", 
   RowBox[{
    RowBox[{"Divide", "[", 
     RowBox[{"1", ",", 
      RowBox[{"lazyRange", "[", 
       RowBox[{"2", ",", "2"}], "]"}]}], "]"}], ",", "5"}], "]"}]}]}], "Input",
 CellLabel->"In[75]:=",ExpressionUUID->"431c46dd-1989-4038-a8a6-287ac92d6e53"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"3", ",", "5", ",", "7", ",", "9", ",", "11"}], "}"}]], "Output",
 CellLabel->"Out[75]=",ExpressionUUID->"1ada3e2b-d368-453c-b3ff-27fd40b4d50a"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"5", ",", "13", ",", "21", ",", "29", ",", "37"}], "}"}]], "Output",
 CellLabel->"Out[76]=",ExpressionUUID->"943b5e32-03ec-4248-a587-5319025657d5"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"1", ",", "4", ",", "27", ",", "256", ",", "3125"}], 
  "}"}]], "Output",
 CellLabel->"Out[77]=",ExpressionUUID->"0e6251f0-aecc-4f92-b62c-5810273d8518"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   FractionBox["1", "2"], ",", 
   FractionBox["1", "4"], ",", 
   FractionBox["1", "6"], ",", 
   FractionBox["1", "8"], ",", 
   FractionBox["1", "10"]}], "}"}]], "Output",
 CellLabel->"Out[78]=",ExpressionUUID->"765e0ab9-d010-419f-aad2-7a452ce26503"]
}, Open  ]]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["lazyList operators", \
"Subsection",ExpressionUUID->"314c8f5e-1a86-4e86-9bd1-68842761416f"],

Cell[TextData[{
 StyleBox["Map",
  FontWeight->"Bold"],
 ", ",
 StyleBox["MapIndexed",
  FontWeight->"Bold"],
 ", ",
 StyleBox["FoldList",
  FontWeight->"Bold"],
 ", ",
 StyleBox["Cases",
  FontWeight->"Bold"],
 ",",
 StyleBox[" Pick",
  FontWeight->"Bold"],
 ",",
 StyleBox[" ",
  FontWeight->"Bold"],
 "and ",
 StyleBox["Select",
  FontWeight->"Bold"],
 " work with lazyLists and return lazyLists. There is also ",
 StyleBox["lazyMapThread",
  FontWeight->"Bold"],
 ", which functions similar to MapThread. All of these functions can be \
combined together to generate more complex lazyLists."
}], "Text",ExpressionUUID->"2db4b7f0-d54f-42c4-8598-19597a08299a"],

Cell[CellGroupData[{

Cell["Map", \
"Subsubsection",ExpressionUUID->"25ea5f2b-c1e7-4656-9115-8c0a9c24f192"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"Map", "[", 
  RowBox[{"Sqrt", ",", 
   RowBox[{"lazyRange", "[", 
    RowBox[{"0", ",", "2"}], "]"}]}], "]"}], "\[IndentingNewLine]", 
 RowBox[{"First", "@", 
  RowBox[{"Take", "[", 
   RowBox[{"%", ",", "5"}], "]"}]}]}], "Input",
 CellLabel->"In[79]:=",ExpressionUUID->"db26052a-0c7d-4de0-99a3-0b0a708b07d2"],

Cell[BoxData[
 RowBox[{"lazyList", "[", 
  RowBox[{"0", ",", 
   RowBox[{"Sqrt", "/@", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{
       RowBox[{"lazyList", "[", 
        RowBox[{"#1", ",", 
         RowBox[{"#0", "[", 
          RowBox[{
           RowBox[{"#2", "+", "#1"}], ",", "#2"}], "]"}]}], "]"}], "&"}], 
      ")"}], "[", 
     RowBox[{
      RowBox[{"2", "+", "0"}], ",", "2"}], "]"}]}]}], "]"}]], "Output",
 CellLabel->"Out[79]=",ExpressionUUID->"5b92e717-f4ea-4ff1-b8f0-5f9aa7e4acf9"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"0", ",", 
   SqrtBox["2"], ",", "2", ",", 
   SqrtBox["6"], ",", 
   RowBox[{"2", " ", 
    SqrtBox["2"]}]}], "}"}]], "Output",
 CellLabel->"Out[80]=",ExpressionUUID->"0e067518-6110-45db-8cbf-4d9dda1984a2"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Fold", \
"Subsubsection",ExpressionUUID->"b293c8ba-17ea-40d2-9a5b-0d024f5a61e0"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"FoldList", "[", 
  RowBox[{"Plus", ",", "x0", ",", 
   RowBox[{"lazyRange", "[", 
    RowBox[{"n", ",", "m"}], "]"}]}], "]"}], "\[IndentingNewLine]", 
 RowBox[{"First", "@", 
  RowBox[{"Take", "[", 
   RowBox[{"%", ",", "5"}], "]"}]}]}], "Input",
 CellLabel->"In[81]:=",ExpressionUUID->"88d3c946-e148-4f02-8892-b1be9959da90"],

Cell[BoxData[
 RowBox[{"lazyList", "[", 
  RowBox[{"x0", ",", 
   RowBox[{"FoldList", "[", 
    RowBox[{"Plus", ",", 
     RowBox[{"x0", "+", "n"}], ",", 
     RowBox[{
      RowBox[{"(", 
       RowBox[{
        RowBox[{"lazyList", "[", 
         RowBox[{"#1", ",", 
          RowBox[{"#0", "[", 
           RowBox[{
            RowBox[{"#2", "+", "#1"}], ",", "#2"}], "]"}]}], "]"}], "&"}], 
       ")"}], "[", 
      RowBox[{
       RowBox[{"m", "+", "n"}], ",", "m"}], "]"}]}], "]"}]}], "]"}]], "Output",
 CellLabel->"Out[81]=",ExpressionUUID->"02533e31-e769-4e37-b40c-5d7820cdfdfa"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"x0", ",", 
   RowBox[{"n", "+", "x0"}], ",", 
   RowBox[{"m", "+", 
    RowBox[{"2", " ", "n"}], "+", "x0"}], ",", 
   RowBox[{
    RowBox[{"3", " ", "m"}], "+", 
    RowBox[{"3", " ", "n"}], "+", "x0"}], ",", 
   RowBox[{
    RowBox[{"6", " ", "m"}], "+", 
    RowBox[{"4", " ", "n"}], "+", "x0"}]}], "}"}]], "Output",
 CellLabel->"Out[82]=",ExpressionUUID->"54bf44fa-037c-406e-9cc5-fbcf06e73a90"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Cases", \
"Subsubsection",ExpressionUUID->"3c7f4e74-23d1-40b0-ba20-1134f3f1a203"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"Cases", "[", 
  RowBox[{
   RowBox[{"lazyRange", "[", 
    RowBox[{"0", ",", 
     RowBox[{"2", "/", "3"}]}], "]"}], ",", "_Integer"}], 
  "]"}], "\[IndentingNewLine]", 
 RowBox[{"First", "@", 
  RowBox[{"Take", "[", 
   RowBox[{"%", ",", "5"}], "]"}]}]}], "Input",
 CellLabel->"In[83]:=",ExpressionUUID->"b0b0dea7-1808-4672-a86a-d9ce4333d960"],

Cell[BoxData[
 RowBox[{"lazyList", "[", 
  RowBox[{"0", ",", 
   RowBox[{"lazyLists`Private`case$25281", "[", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{
       RowBox[{"lazyList", "[", 
        RowBox[{"#1", ",", 
         RowBox[{"#0", "[", 
          RowBox[{
           RowBox[{"#2", "+", "#1"}], ",", "#2"}], "]"}]}], "]"}], "&"}], 
      ")"}], "[", 
     RowBox[{
      RowBox[{
       FractionBox["2", "3"], "+", "0"}], ",", 
      FractionBox["2", "3"]}], "]"}], "]"}]}], "]"}]], "Output",
 CellLabel->"Out[83]=",ExpressionUUID->"5aded130-4202-4ce3-80ec-8e645fdc76a6"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"0", ",", "2", ",", "4", ",", "6", ",", "8"}], "}"}]], "Output",
 CellLabel->"Out[84]=",ExpressionUUID->"cfec572f-6fa9-4a77-a950-c38c54e5517c"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Pick", \
"Subsubsection",ExpressionUUID->"f3a06a45-4dfb-4c77-a330-74be0c8e9361"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"Pick", "[", 
  RowBox[{
   RowBox[{"lazyRange", "[", 
    RowBox[{"0", ",", "2"}], "]"}], ",", 
   RowBox[{"lazyRange", "[", 
    RowBox[{"0", ",", 
     RowBox[{"2", "/", "3"}]}], "]"}], ",", "_Integer"}], 
  "]"}], "\[IndentingNewLine]", 
 RowBox[{"First", "@", 
  RowBox[{"Take", "[", 
   RowBox[{"%", ",", "5"}], "]"}]}]}], "Input",
 CellLabel->"In[85]:=",ExpressionUUID->"02767e8a-5bbd-4578-a783-6b1ca449f3b0"],

Cell[BoxData[
 RowBox[{"lazyList", "[", 
  RowBox[{"0", ",", 
   RowBox[{"lazyLists`Private`pick$25282", "[", 
    RowBox[{
     RowBox[{
      RowBox[{"(", 
       RowBox[{
        RowBox[{"lazyList", "[", 
         RowBox[{"#1", ",", 
          RowBox[{"#0", "[", 
           RowBox[{
            RowBox[{"#2", "+", "#1"}], ",", "#2"}], "]"}]}], "]"}], "&"}], 
       ")"}], "[", 
      RowBox[{
       RowBox[{"2", "+", "0"}], ",", "2"}], "]"}], ",", 
     RowBox[{
      RowBox[{"(", 
       RowBox[{
        RowBox[{"lazyList", "[", 
         RowBox[{"#1", ",", 
          RowBox[{"#0", "[", 
           RowBox[{
            RowBox[{"#2", "+", "#1"}], ",", "#2"}], "]"}]}], "]"}], "&"}], 
       ")"}], "[", 
      RowBox[{
       RowBox[{
        FractionBox["2", "3"], "+", "0"}], ",", 
       FractionBox["2", "3"]}], "]"}]}], "]"}]}], "]"}]], "Output",
 CellLabel->"Out[85]=",ExpressionUUID->"396303bb-db27-4daa-bbc4-eee1adfd3fe3"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"0", ",", "6", ",", "12", ",", "18", ",", "24"}], "}"}]], "Output",
 CellLabel->"Out[86]=",ExpressionUUID->"f581f707-5972-496a-a789-6275a6bf05d9"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Select", \
"Subsubsection",ExpressionUUID->"67410976-9bef-4063-994a-da7ffc8607aa"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"Select", "[", 
  RowBox[{
   RowBox[{"lazyRange", "[", "]"}], ",", "OddQ"}], 
  "]"}], "\[IndentingNewLine]", 
 RowBox[{"First", "@", 
  RowBox[{"Take", "[", 
   RowBox[{"%", ",", "5"}], "]"}]}]}], "Input",
 CellLabel->"In[87]:=",ExpressionUUID->"f7cc65d1-b623-4858-860e-fb8bda6906cf"],

Cell[BoxData[
 RowBox[{"lazyList", "[", 
  RowBox[{"1", ",", 
   RowBox[{"Select", "[", 
    RowBox[{
     RowBox[{
      RowBox[{"(", 
       RowBox[{
        RowBox[{"lazyList", "[", 
         RowBox[{"#1", ",", 
          RowBox[{"#0", "[", 
           RowBox[{
            RowBox[{"#2", "+", "#1"}], ",", "#2"}], "]"}]}], "]"}], "&"}], 
       ")"}], "[", 
      RowBox[{
       RowBox[{"1", "+", "1"}], ",", "1"}], "]"}], ",", "OddQ"}], "]"}]}], 
  "]"}]], "Output",
 CellLabel->"Out[87]=",ExpressionUUID->"ae30df0e-76d7-45e9-ae69-0c2ffc1c924f"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"1", ",", "3", ",", "5", ",", "7", ",", "9"}], "}"}]], "Output",
 CellLabel->"Out[88]=",ExpressionUUID->"559df153-efeb-41a3-aca4-cb245875d76a"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["MapIndexed", \
"Subsubsection",ExpressionUUID->"165f8426-7fdc-4dd2-879f-7c449ccd6ae4"],

Cell[TextData[{
 StyleBox["MapIndexed",
  FontWeight->"Bold"],
 " allows you to map a function of 2 arguments over a lazyList. The 2nd \
argument is an integer that keeps track of the position in the list. Note \
that this is slightly different from the way MapIndexed works normally, which \
supplies a list containing the index to the second argument. "
}], "Text",ExpressionUUID->"46c8a02f-7fcf-4bfc-ab29-1b9988a542db"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"First", "@", 
  RowBox[{"Take", "[", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"MapIndexed", "[", 
     RowBox[{
      RowBox[{
       RowBox[{"{", 
        RowBox[{"#1", ",", "#2"}], "}"}], "&"}], ",", 
      RowBox[{"lazyRange", "[", 
       RowBox[{"2", ",", "2"}], "]"}]}], "]"}], ",", "\[IndentingNewLine]", 
    "5"}], "\[IndentingNewLine]", "]"}]}]], "Input",
 CellLabel->"In[89]:=",ExpressionUUID->"ab76f983-28b6-43cf-9633-09f130a5a988"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{"2", ",", "1"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"4", ",", "2"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"6", ",", "3"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"8", ",", "4"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"10", ",", "5"}], "}"}]}], "}"}]], "Output",
 CellLabel->"Out[89]=",ExpressionUUID->"fbc7310c-167d-4e21-b6e2-2048442fb573"]
}, Open  ]],

Cell["\<\
MapIndexed has a third argument to specify the starting position. This is \
useful when passing a lazyList which has already been partially evaluated.\
\>", "Text",ExpressionUUID->"a1d52835-fdc6-4c94-8c49-8996fd82e507"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"First", "@", 
  RowBox[{"Take", "[", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"MapIndexed", "[", 
     RowBox[{
      RowBox[{
       RowBox[{"{", 
        RowBox[{"#1", ",", "#2"}], "}"}], "&"}], ",", 
      RowBox[{"lazyRange", "[", "]"}], ",", "20"}], "]"}], ",", 
    "\[IndentingNewLine]", "5"}], "\[IndentingNewLine]", "]"}]}]], "Input",
 CellLabel->"In[90]:=",ExpressionUUID->"fc210aed-ccdd-4241-b891-65b6433f88ed"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{"1", ",", "20"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"2", ",", "21"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"3", ",", "22"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"4", ",", "23"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"5", ",", "24"}], "}"}]}], "}"}]], "Output",
 CellLabel->"Out[90]=",ExpressionUUID->"bcdd76ca-df41-46e6-a236-0fe769118a82"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["lazyMapThread", \
"Subsubsection",ExpressionUUID->"6527aab7-0b41-4f41-8386-669ecaa71c8b"],

Cell[TextData[{
 StyleBox["lazyMapThread",
  FontWeight->"Bold"],
 " is functionally similar to MapThread, except all arguments are fed as a \
List into the first slot of the mapped function:"
}], "Text",ExpressionUUID->"edc0cb50-690c-4cee-b084-17a3472acd11"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"First", "@", 
  RowBox[{"Take", "[", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"lazyMapThread", "[", 
     RowBox[{"f", ",", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"lazyRange", "[", "]"}], ",", 
        RowBox[{"lazyRange", "[", 
         RowBox[{"2", ",", "2"}], "]"}]}], "}"}]}], "]"}], ",", 
    "\[IndentingNewLine]", "5"}], "\[IndentingNewLine]", "]"}]}]], "Input",
 CellLabel->"In[91]:=",ExpressionUUID->"2f643a7b-e0c1-44f8-bfc1-340a161a0d8a"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"f", "[", 
    RowBox[{"{", 
     RowBox[{"1", ",", "2"}], "}"}], "]"}], ",", 
   RowBox[{"f", "[", 
    RowBox[{"{", 
     RowBox[{"2", ",", "4"}], "}"}], "]"}], ",", 
   RowBox[{"f", "[", 
    RowBox[{"{", 
     RowBox[{"3", ",", "6"}], "}"}], "]"}], ",", 
   RowBox[{"f", "[", 
    RowBox[{"{", 
     RowBox[{"4", ",", "8"}], "}"}], "]"}], ",", 
   RowBox[{"f", "[", 
    RowBox[{"{", 
     RowBox[{"5", ",", "10"}], "}"}], "]"}]}], "}"}]], "Output",
 CellLabel->"Out[91]=",ExpressionUUID->"92567fc9-afcf-4c5f-9b86-bfcbfa007d6c"]
}, Open  ]],

Cell["Compare with regular MapThread:", \
"Text",ExpressionUUID->"c06c056b-c716-4d08-82f9-cdd01019726f"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"MapThread", "[", 
  RowBox[{"f", ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"Range", "[", "5", "]"}], ",", 
     RowBox[{"2", 
      RowBox[{"Range", "[", "5", "]"}]}]}], "}"}]}], "]"}]], "Input",
 CellLabel->"In[92]:=",ExpressionUUID->"3bbfeee5-cbb7-4e4d-8186-0d37f0b22777"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"f", "[", 
    RowBox[{"1", ",", "2"}], "]"}], ",", 
   RowBox[{"f", "[", 
    RowBox[{"2", ",", "4"}], "]"}], ",", 
   RowBox[{"f", "[", 
    RowBox[{"3", ",", "6"}], "]"}], ",", 
   RowBox[{"f", "[", 
    RowBox[{"4", ",", "8"}], "]"}], ",", 
   RowBox[{"f", "[", 
    RowBox[{"5", ",", "10"}], "]"}]}], "}"}]], "Output",
 CellLabel->"Out[92]=",ExpressionUUID->"585d7ae9-3c89-4265-8b37-d2025daf740a"]
}, Open  ]]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Caveats", \
"Subsection",ExpressionUUID->"913456ae-86bc-474d-90bb-1fe719afec8e"],

Cell["\<\
When defining your own lazyLists, make sure the last part of the list does \
not evaluate to itself. Take etc. will not work correctly on such lists and \
stop iterating prematurely:\
\>", "Text",ExpressionUUID->"232911ec-716c-44a2-a324-124b95f3af23"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"badExample", " ", "=", 
  RowBox[{
   RowBox[{"Function", "[", 
    RowBox[{"lazyList", "[", 
     RowBox[{"1", ",", 
      RowBox[{"#0", "[", "]"}]}], "]"}], "]"}], "[", 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{"badExample", "===", 
  RowBox[{"Last", "[", "badExample", "]"}]}], "\[IndentingNewLine]", 
 RowBox[{"First", " ", "@", 
  RowBox[{"Take", "[", 
   RowBox[{"badExample", ",", "20"}], "]"}]}]}], "Input",
 CellLabel->"In[93]:=",ExpressionUUID->"16b8e012-7427-4406-b801-d4e7e34f299e"],

Cell[BoxData[
 RowBox[{"lazyList", "[", 
  RowBox[{"1", ",", 
   RowBox[{
    RowBox[{"(", 
     RowBox[{
      RowBox[{"lazyList", "[", 
       RowBox[{"1", ",", 
        RowBox[{"#0", "[", "]"}]}], "]"}], "&"}], ")"}], "[", "]"}]}], 
  "]"}]], "Output",
 CellLabel->"Out[93]=",ExpressionUUID->"25e2d3bb-a65d-4f18-a29d-464856c633cf"],

Cell[BoxData["True"], "Output",
 CellLabel->"Out[94]=",ExpressionUUID->"39e4eaec-9a6d-4681-8170-c464d16bedcc"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"1", ",", "1"}], "}"}]], "Output",
 CellLabel->"Out[95]=",ExpressionUUID->"973ed408-c942-478e-84cf-b3844cdfcd05"]
}, Open  ]],

Cell["\<\
Instead, you can add an iterator that increases with each evaluation. This \
iterator can also be used to keep track of the position in the lazy list:\
\>", "Text",ExpressionUUID->"24b81520-5eb3-4541-b793-4c68766f4c01"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"example", " ", "=", 
  RowBox[{
   RowBox[{"Function", "[", 
    RowBox[{"lazyList", "[", 
     RowBox[{"1", ",", 
      RowBox[{"#0", "[", 
       RowBox[{"#1", "+", "1"}], "]"}]}], "]"}], "]"}], "[", "1", 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{"example", "===", 
  RowBox[{"Last", "[", "example", "]"}]}], "\[IndentingNewLine]", 
 RowBox[{"Take", "[", 
  RowBox[{"example", ",", "20"}], "]"}], "\[IndentingNewLine]", 
 RowBox[{"position", "=", 
  RowBox[{"Replace", "[", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"Last", "@", "%"}], ",", "\[IndentingNewLine]", 
    RowBox[{"{", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"lazyList", "[", 
       RowBox[{"_", ",", 
        RowBox[{
         RowBox[{"Function", "[", "__", "]"}], "[", "i_", "]"}]}], "]"}], 
      "\[RuleDelayed]", "i"}], "\[IndentingNewLine]", "}"}]}], 
   "]"}]}]}], "Input",
 CellLabel->"In[96]:=",ExpressionUUID->"44069107-bcb5-4d00-85bc-c9773bf4979b"],

Cell[BoxData[
 RowBox[{"lazyList", "[", 
  RowBox[{"1", ",", 
   RowBox[{
    RowBox[{"(", 
     RowBox[{
      RowBox[{"lazyList", "[", 
       RowBox[{"1", ",", 
        RowBox[{"#0", "[", 
         RowBox[{"#1", "+", "1"}], "]"}]}], "]"}], "&"}], ")"}], "[", 
    RowBox[{"1", "+", "1"}], "]"}]}], "]"}]], "Output",
 CellLabel->"Out[96]=",ExpressionUUID->"03fae810-3e79-4a56-9b54-495702182d2c"],

Cell[BoxData["False"], "Output",
 CellLabel->"Out[97]=",ExpressionUUID->"d2efdd40-18e9-4b6b-b470-4a6a247b955a"],

Cell[BoxData[
 RowBox[{"lazyList", "[", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{
    "1", ",", "1", ",", "1", ",", "1", ",", "1", ",", "1", ",", "1", ",", "1",
      ",", "1", ",", "1", ",", "1", ",", "1", ",", "1", ",", "1", ",", "1", 
     ",", "1", ",", "1", ",", "1", ",", "1", ",", "1"}], "}"}], ",", 
   RowBox[{"lazyList", "[", 
    RowBox[{"1", ",", 
     RowBox[{
      RowBox[{"(", 
       RowBox[{
        RowBox[{"lazyList", "[", 
         RowBox[{"1", ",", 
          RowBox[{"#0", "[", 
           RowBox[{"#1", "+", "1"}], "]"}]}], "]"}], "&"}], ")"}], "[", 
      RowBox[{"20", "+", "1"}], "]"}]}], "]"}]}], "]"}]], "Output",
 CellLabel->"Out[98]=",ExpressionUUID->"03ff35cc-7aea-4c72-b71f-3cb7e2720660"],

Cell[BoxData["21"], "Output",
 CellLabel->"Out[99]=",ExpressionUUID->"77b32651-149d-4ab8-a021-9516f3d930e9"]
}, Open  ]]
}, Open  ]]
}, Open  ]]
},
WindowSize->{983, 839},
WindowMargins->{{Automatic, 377}, {Automatic, 40}},
PrivateNotebookOptions->{"FileOutlineCache"->False},
ShowGroupOpener->True,
TrackCellChangeTimes->False,
Magnification:>1.3 Inherited,
FrontEndVersion->"11.3 for Microsoft Windows (64-bit) (March 6, 2018)",
StyleDefinitions->"Default.nb"
]

